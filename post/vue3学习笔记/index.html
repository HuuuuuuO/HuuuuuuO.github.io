<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="u-_xuPl85yC2qJmdn4sCaysuCunGd3GdY2naWbl9prg" />
    <meta name="google-site-verification" content="34pbjQEuaCk6SSod3Eh08kAJjhi4nsNULCArQZJe3jM" />
    <meta name="baidu-site-verification" content="codeva-fLl4PJFT4X" />
    
    <meta property="og:site_name" content="Nefelibata">
    <meta property="og:type" content="article">
  


    
    <meta property="og:image" content="https://huuuuuuo.github.io//img/home-bg-jeep.jpg">
    <meta property="twitter:image" content="https://huuuuuuo.github.io//img/home-bg-jeep.jpg" />
    

    
    <meta name="title" content="Vue3学习笔记" />
    <meta property="og:title" content="Vue3学习笔记" />
    <meta property="twitter:title" content="Vue3学习笔记" />
    

    
    <meta name="description" content="Nefelibata,看吧天空在上,Blog,博客,个人网站,互联网,Web,hugo">
    <meta property="og:description" content="Nefelibata,看吧天空在上,Blog,博客,个人网站,互联网,Web,hugo" />
    <meta property="twitter:description" content="Nefelibata,看吧天空在上,Blog,博客,个人网站,互联网,Web,hugo" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="Nefelibata,看吧天空在上,Blog,博客,个人网站,互联网,Web,hugo">
    
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="manifest" href="/img/site.webmanifest">
<link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#da532c">
<link rel="shortcut icon" href="/img/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Nefelibata">
<meta name="application-name" content="Nefelibata">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/img/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

    <title>Vue3学习笔记 | Blog</title>

    <link rel="canonical" href="/post/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-web/style.css" />
    <style>
        body {
        font-family: "LXGW WenKai Screen";
        font-weight: normal;
        }
    </style>

    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link rel="stylesheet" href="/css/font-awesome.all.min.css">

    
    <link rel="stylesheet" href="https://huuuuuuo.github.io/css/copy-to-clipboard.css">

    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    <script src="/js/lazysizes.min.js"></script>

    
    

</head>









<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Nefelibata</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
  
       
                 
               
                    <li>
                        <a href="/">All</a>
                    </li>
                    <li>
                        <script>
  function goToRandomPost() {
    const pages = [
      
      "\/post\/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E5%BC%97%E6%B4%9B%E5%A7%86%E7%88%B1%E7%9A%84%E8%89%BA%E6%9C%AF\/?utm_source=random",
      
      "\/post\/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E4%B8%87%E7%BB%B4%E9%92%A2%E6%8B%90%E7%82%B9\/?utm_source=random",
      
      "\/post\/%E4%BB%A3%E7%A0%81%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D1mass%E7%AE%A1%E7%90%86%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6\/?utm_source=random",
      
      "\/post\/%E7%99%BD%E7%9B%92%E6%89%AB%E6%8F%8F%E5%A6%82%E4%BD%95%E4%B8%8Eai%E7%BB%93%E5%90%88\/?utm_source=random",
      
      "\/post\/git%E4%BD%BF%E7%94%A8%E5%A6%82%E4%BD%95%E5%9C%A8%E6%9C%AC%E5%9C%B0%E7%AE%A1%E7%90%86%E5%92%8C%E5%88%87%E6%8D%A2%E5%A4%9A%E4%B8%AAgithub%E8%B4%A6%E5%8F%B7\/?utm_source=random",
      
      "\/post\/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E7%AB%A0%E5%8F%8A%E7%AC%AC%E4%B8%80%E7%AB%A0%E7%BB%83%E4%B9%A0%E4%BC%98%E5%8C%96\/?utm_source=random",
      
      "\/post\/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%B8%80%E7%AB%A0%E7%BB%83%E4%B9%A0\/?utm_source=random",
      
      "\/post\/%E5%86%B7%E7%AC%91%E8%AF%9D%E6%94%B6%E9%9B%86\/?utm_source=random",
      
      "\/post\/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%B8%80%E7%AB%A0\/?utm_source=random",
      
      "\/post\/git%E6%96%B0%E5%BB%BA%E7%A9%BA%E5%88%86%E6%94%AF%E5%B9%B6%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6\/?utm_source=random",
      
      "\/post\/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E6%9D%8E%E5%A8%9F%E6%88%91%E7%9A%84%E9%98%BF%E5%8B%92%E6%B3%B0\/?utm_source=random",
      
      "\/post\/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0svm%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0\/?utm_source=random",
      
      "\/post\/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0knn%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0\/?utm_source=random",
      
      "\/post\/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E5%88%98%E6%85%88%E6%AC%A3%E6%9C%9D%E9%97%BB%E9%81%93\/?utm_source=random",
      
      "\/post\/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0ai%E5%90%AF%E7%A4%BA\/?utm_source=random",
      
      "\/post\/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7jmeter%E4%BD%BF%E7%94%A8%E5%AD%A6%E4%B9%A0\/?utm_source=random",
      
      "\/post\/github%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93%E5%B9%B6%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%A0%81\/?utm_source=random",
      
      "\/post\/vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0\/?utm_source=random",
      
      "\/post\/%E4%B8%87%E5%8E%86%E5%8D%81%E4%BA%94%E5%B9%B4%E6%91%98%E8%A6%81\/?utm_source=random",
      
      "\/post\/html%E9%A1%B5%E9%9D%A2%E5%B5%8C%E5%85%A5%E6%B5%81%E7%A8%8B%E5%9B%BE\/?utm_source=random",
      
      "\/post\/hugo%E5%8D%9A%E5%AE%A2%E6%94%B9%E9%80%A0%E6%96%B0%E5%A2%9E%E7%83%AD%E6%A6%9C\/?utm_source=random",
      
      "\/post\/hugo%E5%A2%9E%E5%8A%A0%E5%B9%B4%E6%9C%88%E6%97%A5%E6%97%B6%E9%97%B4%E8%BF%9B%E5%BA%A6%E6%9D%A1\/?utm_source=random",
      
      "\/post\/hugo%E6%B7%BB%E5%8A%A0%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5\/?utm_source=random",
      
      "\/post\/hugo%E5%A2%9E%E5%8A%A0%E5%8F%B0%E8%AF%8D%E9%9A%8F%E6%9C%BA%E6%98%BE%E7%A4%BA\/?utm_source=random",
      
      "\/post\/hugo%E4%B8%AD%E8%8B%B1%E6%96%87%E4%B9%8B%E9%97%B4%E8%87%AA%E5%8A%A8%E5%8A%A0%E7%A9%BA%E6%A0%BC\/?utm_source=random",
      
      "\/post\/hugo%E5%BD%92%E6%A1%A3%E6%94%B9%E4%B8%BA%E5%B9%B4%E6%9C%88%E7%BB%9F%E8%AE%A1\/?utm_source=random",
      
      "\/post\/hugo%E9%98%85%E8%AF%BB%E8%BF%9B%E5%BA%A6%E6%9D%A1\/?utm_source=random",
      
      "\/post\/hugo%E5%B0%86%E9%A6%96%E9%A1%B5%E6%96%87%E7%AB%A0%E6%8C%89%E7%85%A7%E6%9C%80%E5%90%8E%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4%E6%98%BE%E7%A4%BA\/?utm_source=random",
      
      "\/post\/hugo%E5%AD%A6%E4%B9%A0\/?utm_source=random",
      
      "\/post\/hugo%E5%A2%9E%E5%8A%A0%E6%96%B0%E9%A1%B5%E9%9D%A2\/?utm_source=random",
      
      "\/post\/hugo%E5%A2%9E%E5%8A%A0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD\/?utm_source=random",
      
      "\/post\/githubpages%E9%85%8D%E7%BD%AE%E5%9F%9F%E5%90%8D\/?utm_source=random",
      
      "\/post\/%E5%9F%9F%E5%90%8Da%E8%AE%B0%E5%BD%95cname%E7%AD%89%E9%83%BD%E6%98%AF%E4%BB%80%E4%B9%88\/?utm_source=random",
      
      "\/post\/hugo%E6%B7%BB%E5%8A%A0%E9%9A%8F%E6%9C%BA%E6%B5%8F%E8%A7%88%E6%96%87%E7%AB%A0%E5%8A%9F%E8%83%BD\/?utm_source=random",
      
      "\/post\/hugo%E4%B8%80%E4%BA%9B%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%AD%E4%BB%A3%E7%A0%81%E6%94%B6%E9%9B%86\/?utm_source=random",
      
      "\/post\/hugo%E6%96%87%E5%AD%97%E6%A0%87%E8%AE%B0\/?utm_source=random",
      
      "\/post\/hugo%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E5%90%8E%E6%9C%80%E5%90%8E%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98\/?utm_source=random",
      
      "\/post\/hugo%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE%E9%A3%8E%E6%A0%BC\/?utm_source=random",
      
      "\/post\/hugo%E6%B7%BB%E5%8A%A0%E7%83%AD%E5%8A%9B%E5%9B%BE\/?utm_source=random",
      
      "\/post\/hugo%E5%9B%BE%E7%89%87%E7%82%B9%E5%87%BB%E6%94%BE%E5%A4%A7\/?utm_source=random",
      
      "\/post\/hugo%E6%B7%BB%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD\/?utm_source=random",
      
      "\/post\/hugo%E5%86%85%E5%AE%B9%E6%8A%98%E5%8F%A0%E4%B8%8E%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%A7%E5%B0%8F%E9%99%90%E5%88%B6\/?utm_source=random",
      
      "\/post\/hugo%E8%AE%BF%E9%97%AE%E9%87%8F%E7%BB%9F%E8%AE%A1\/?utm_source=random",
      
      "\/post\/hugo%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93\/?utm_source=random",
      
      "\/post\/hugo%E4%B8%80%E9%94%AE%E5%9B%9E%E5%88%B0%E9%A1%B6%E9%83%A8\/?utm_source=random",
      
      "\/post\/hugo%E5%8D%9A%E5%AE%A2%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4\/?utm_source=random",
      
      "\/post\/hugo%E6%80%BB%E5%AD%97%E6%95%B0%E7%BB%9F%E8%AE%A1\/?utm_source=random",
      
      "\/post\/git%E4%B9%8B.gitignore%E6%97%A0%E6%95%88%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95\/?utm_source=random",
      
      "\/post\/python%E6%97%A0%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2\/?utm_source=random",
      
      "\/post\/hugo%E5%9B%BE%E7%89%87%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84%E4%BC%98%E5%8C%96\/?utm_source=random",
      
      "\/post\/hugo%E6%8F%92%E4%BB%B6%E4%B9%8B%E4%BB%A3%E7%A0%81%E5%9D%97%E6%8B%B7%E8%B4%9D%E6%8F%92%E4%BB%B6\/?utm_source=random",
      
      "\/post\/%E8%BF%9E%E6%8E%A5github%E6%97%B6connection-reset%E7%9A%84%E9%97%AE%E9%A2%98\/?utm_source=random",
      
      "\/post\/typora%E5%BF%AB%E6%8D%B7%E9%94%AE\/?utm_source=random",
      
      "\/post\/git%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8\/?utm_source=random",
      
      "\/post\/hugo%E6%97%A5%E5%B8%B8%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B\/?utm_source=random",
      
      "\/post\/%E5%85%B3%E4%BA%8Egpt%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E5%92%8C%E6%9C%AA%E6%9D%A5%E5%BD%B1%E5%93%8D%E8%BD%AC%E8%BD%BD-copy\/?utm_source=random",
      
      "\/post\/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BAhugo\u002bgithubpages-copy\/?utm_source=random",
      
      "\/post\/git%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E5%92%8C%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3\/?utm_source=random",
      ];
    const rand = Math.floor(Math.random() * pages.length);
    window.location.href = pages[rand];
  }
</script>
                        <a class="random" onclick='goToRandomPost()'>STROLL</a>
                    </li>
                    
                        
                        <li>
                            <a href="/categories/read/">read</a>
                        </li>
     
                        
                        <li>
                            <a href="/categories/tech/">tech</a>
                        </li>
     
                        
                    
                    
                    
		    
                        <li><a href="/archive/">Timeline</a></li>
                    
                        <li><a href="/about/">ABOUT</a></li>
                    
                  

                    <li>
                        <a id="search-btn"  href="javascript:void(0);">
                            <i class="fa fa-search"></i>
                        </a>
                   </li>

              

                </ul>

            </div>
            
        </div>
        
        
    </div>
    <head>
  <link rel="stylesheet" type="text/css" href="/css/custom.css">
  </head>
<div id="fastSearch">
  <input id="searchInput" tabindex="0" type="text" placeholder="# grep ..">
  <ul id="searchResults">
  </ul>
</div> 

    
</nav>



<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<script src="/js/fuse.min.js"></script>
<script src="/js/fastsearch.js"></script>
<link rel="stylesheet" type="text/css" href="/css/custom.css">




<link rel="stylesheet" href="/css/single.css">


<style type="text/css">
      
</style>
<header class="intro-header">
    <div class="bg_pic">
       <img class="bg-source" src="/img/2/1 (3).jpg" width="100%" height="100%" style="object-fit:cover">
                  
    </div>
    

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/vue3" title="vue3">
                            vue3
                        </a>
                        
                    </div>
                    <h1>Vue3学习笔记</h1>

                    <h2 class="subheading"></h2>
                    <span class="meta">
                        
                        Posted by
                        
                        Nefelibata
                        
                        on
                        Wed 2024-04-24
                        
                        | <span class="post-date">21906 words</span> | about<span class="more-meta"> 44 mins</span>
                        
                        
                        
                        <br>Last Modified on Mon 2024-05-27
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>


   </header>
    


    
    <article>
        <div class="container">
            <div class="row">

                
                <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                    
                

             
                    <blockquote>
<p>本文转载并修改自<a href="https://www.bilibili.com/video/BV1Za4y1r7KE?p=1">尚硅谷Vue3入门到实战</a></p>
</blockquote>
<h1 id="1-vue3简介">1. Vue3简介</h1>
<ul>
<li>
<p>2020年9月18日，<code>Vue.js</code>发布版<code>3.0</code>版本，代号：<code>One Piece</code>（n</p>
</li>
<li>
<p>经历了：<a href="https://github.com/vuejs/core/commits/main">4800+次提交</a>、<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+个RFC</a>、<a href="https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+">600+次PR</a>、<a href="https://github.com/vuejs/core/graphs/contributors">300+贡献者</a></p>
</li>
<li>
<p>官方发版地址：<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece · vuejs/core</a></p>
</li>
<li>
<p>截止2023年10月，最新的公开版本为：<code>3.3.4</code></p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2-1713945063881.png">
<img src="/img/1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2-1713945063881.png" alt="1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2"  />
</a>
</div>

</p>
</li>
</ul>
<h2 id="11-性能的提升">1.1. 【性能的提升】</h2>
<ul>
<li>
<p>打包大小减少<code>41%</code>。</p>
</li>
<li>
<p>初次渲染快<code>55%</code>, 更新渲染快<code>133%</code>。</p>
</li>
<li>
<p>内存减少<code>54%</code>。</p>
</li>
</ul>
<h2 id="12-源码的升级">1.2.【 源码的升级】</h2>
<ul>
<li>
<p>使用<code>Proxy</code>代替<code>defineProperty</code>实现响应式。</p>
</li>
<li>
<p>重写虚拟<code>DOM</code>的实现和<code>Tree-Shaking</code>。</p>
</li>
</ul>
<h2 id="13-拥抱typescript">1.3. 【拥抱TypeScript】</h2>
<ul>
<li><code>Vue3</code>可以更好的支持<code>TypeScript</code>。</li>
</ul>
<h2 id="14-新的特性">1.4. 【新的特性】</h2>
<ol>
<li>
<p><code>Composition API</code>（组合<code>API</code>）：</p>
<ul>
<li>
<p><code>setup</code></p>
</li>
<li>
<p><code>ref</code>与<code>reactive</code></p>
</li>
<li>
<p><code>computed</code>与<code>watch</code></p>
<p>&hellip;&hellip;</p>
</li>
</ul>
</li>
<li>
<p>新的内置组件：</p>
<ul>
<li>
<p><code>Fragment</code></p>
</li>
<li>
<p><code>Teleport</code></p>
</li>
<li>
<p><code>Suspense</code></p>
<p>&hellip;&hellip;</p>
</li>
</ul>
</li>
<li>
<p>其他改变：</p>
<ul>
<li>
<p>新的生命周期钩子</p>
</li>
<li>
<p><code>data</code> 选项应始终被声明为一个函数</p>
</li>
<li>
<p>移除<code>keyCode</code>支持作为<code> v-on</code> 的修饰符</p>
<p>&hellip;&hellip;</p>
</li>
</ul>
</li>
</ol>
<h1 id="2-创建vue3工程">2. 创建Vue3工程</h1>
<h2 id="21-基于-vue-cli-创建">2.1. 【基于 vue-cli 创建】</h2>
<p>点击查看<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">官方文档</a></p>
<blockquote>
<p>备注：目前<code>vue-cli</code>已处于维护模式，官方推荐基于 <code>Vite</code> 创建项目。</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#9893a5">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#d7827e">vue</span> <span style="color:#797593">-</span><span style="color:#d7827e">-version</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">## 安装或者升级你的@vue/cli </span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#d7827e">npm</span> <span style="color:#d7827e">install</span> <span style="color:#d7827e">-g</span> <span style="color:#d7827e">@vue</span><span style="color:#797593">/</span><span style="color:#d7827e">cli
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#d7827e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5">## 执行创建命令</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#d7827e">vue</span> <span style="color:#d7827e">create</span> <span style="color:#d7827e">vue_test</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#9893a5">##  随后选择3.x</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#9893a5">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#9893a5">##  &gt; 3.x</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#9893a5">##    2.x</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#9893a5">## 启动</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#d7827e">cd </span><span style="color:#d7827e">vue_test</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#d7827e">npm</span> <span style="color:#d7827e">run</span> <span style="color:#d7827e">serve</span>
</span></span></code></pre></div><hr>
<h2 id="22-基于-vite-创建推荐">2.2. 【基于 vite 创建】(推荐)</h2>
<p><code>vite</code> 是新一代前端构建工具，官网地址：<a href="https://vitejs.cn/">https://vitejs.cn</a>，<code>vite</code>的优势如下：</p>
<ul>
<li>
<p>轻量快速的热重载（<code>HMR</code>），能实现极速的服务启动。</p>
</li>
<li>
<p>对 <code>TypeScript</code>、<code>JSX</code>、<code>CSS</code> 等支持开箱即用。</p>
</li>
<li>
<p>真正的按需编译，不再等待整个应用编译完成。</p>
</li>
<li>
<p><code>webpack</code>构建 与 <code>vite</code>构建对比图如下：


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe-1713945151159.png">
<img src="/img/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe-1713945151159.png" alt="1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe"  />
</a>
</div>

</p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f-1713945134120.png">
<img src="/img/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f-1713945134120.png" alt="1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f"  />
</a>
</div>

</p>
</li>
</ul>
<ul>
<li>具体操作如下（点击查看<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">官方文档</a>）</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#9893a5">## 1.创建命令</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#d7827e">npm</span> <span style="color:#d7827e">create</span> <span style="color:#d7827e">vue</span><span style="color:#d7827e">@latest</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">## 2.具体配置</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#9893a5">## 配置项目名称</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#b4637a">√</span> <span style="color:#d7827e">Project</span> <span style="color:#d7827e">name</span><span style="color:#b4637a">:</span> <span style="color:#d7827e">vue3_test</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5">## 是否添加TypeScript支持</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#b4637a">√</span> <span style="color:#d7827e">Add</span> <span style="color:#d7827e">TypeScript</span><span style="color:#797593">?</span>  <span style="color:#d7827e">Yes</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#9893a5">## 是否添加JSX支持</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#b4637a">√</span> <span style="color:#d7827e">Add</span> <span style="color:#d7827e">JSX</span> <span style="color:#d7827e">Support</span><span style="color:#797593">?</span>  <span style="color:#d7827e">No</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#9893a5">## 是否添加路由环境</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#b4637a">√</span> <span style="color:#d7827e">Add</span> <span style="color:#d7827e">Vue</span> <span style="color:#d7827e">Router</span> <span style="color:#286983">for</span> <span style="color:#d7827e">Single</span> <span style="color:#d7827e">Page</span> <span style="color:#d7827e">Application</span> <span style="color:#d7827e">development</span><span style="color:#797593">?</span>  <span style="color:#d7827e">No</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#9893a5">## 是否添加pinia环境</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#b4637a">√</span> <span style="color:#d7827e">Add</span> <span style="color:#d7827e">Pinia</span> <span style="color:#286983">for</span> <span style="color:#d7827e">state</span> <span style="color:#d7827e">management</span><span style="color:#797593">?</span>  <span style="color:#d7827e">No</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#9893a5">## 是否添加单元测试</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#b4637a">√</span> <span style="color:#d7827e">Add</span> <span style="color:#d7827e">Vitest</span> <span style="color:#286983">for</span> <span style="color:#d7827e">Unit</span> <span style="color:#d7827e">Testing</span><span style="color:#797593">?</span>  <span style="color:#d7827e">No</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5">## 是否添加端到端测试方案</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#b4637a">√</span> <span style="color:#d7827e">Add</span> <span style="color:#d7827e">an</span> <span style="color:#d7827e">End-to</span><span style="color:#d7827e">-End</span> <span style="color:#d7827e">Testing</span> <span style="color:#d7827e">Solution</span><span style="color:#797593">?</span> <span style="color:#b4637a">»</span> <span style="color:#d7827e">No</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#9893a5">## 是否添加ESLint语法检查</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#b4637a">√</span> <span style="color:#d7827e">Add</span> <span style="color:#d7827e">ESLint</span> <span style="color:#286983">for</span> <span style="color:#d7827e">code</span> <span style="color:#d7827e">quality</span><span style="color:#797593">?</span>  <span style="color:#d7827e">Yes</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#9893a5">## 是否添加Prettiert代码格式化</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#b4637a">√</span> <span style="color:#d7827e">Add</span> <span style="color:#d7827e">Prettier</span> <span style="color:#286983">for</span> <span style="color:#d7827e">code</span> <span style="color:#d7827e">formatting</span><span style="color:#797593">?</span>  <span style="color:#d7827e">No</span>
</span></span></code></pre></div><p>自己动手编写一个App组件</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;app&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">你好啊</span><span style="color:#b4637a">！</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;App&#39;</span> <span style="color:#9893a5">//组件名
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#9893a5"></span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">style</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#797593">.</span><span style="color:#d7827e">app</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>    <span style="color:#d7827e">background</span><span style="color:#797593">-</span><span style="color:#d7827e">color</span><span style="color:#797593">:</span> <span style="color:#b4637a">#</span><span style="color:#d7827e">ddd</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>    <span style="color:#d7827e">box</span><span style="color:#797593">-</span><span style="color:#d7827e">shadow</span><span style="color:#797593">:</span> <span style="color:#ea9d34">0</span> <span style="color:#ea9d34">0</span> <span style="color:#ea9d34">10</span><span style="color:#d7827e">px</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>    <span style="color:#d7827e">border</span><span style="color:#797593">-</span><span style="color:#d7827e">radius</span><span style="color:#797593">:</span> <span style="color:#ea9d34">10</span><span style="color:#d7827e">px</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>    <span style="color:#d7827e">padding</span><span style="color:#797593">:</span> <span style="color:#ea9d34">20</span><span style="color:#d7827e">px</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">style</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><p>安装官方推荐的<code>vscode</code>插件：</p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/volar-1713945183100.png">
<img src="/img/volar-1713945183100.png" alt="volar"  />
</a>
</div>




<div class="post-img-view">
<a data-fancybox="gallery" href="/img/image-20231218085906380.png">
<img src="/img/image-20231218085906380.png" alt="image-20231218085906380"  />
</a>
</div>

</p>
<p>总结：</p>
<ul>
<li><code>Vite</code> 项目中，<code>index.html</code> 是项目的入口文件，在项目最外层。</li>
<li>加载<code>index.html</code>后，<code>Vite</code> 解析 <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> 指向的<code>JavaScript</code>。</li>
<li><code>Vue3</code>**中是通过 **<code>createApp</code> 函数创建一个应用实例。</li>
</ul>
<h2 id="23-一个简单的效果">2.3. 【一个简单的效果】</h2>
<p><code>Vue3</code>向下兼容<code>Vue2</code>语法，且<code>Vue3</code>中的模板中可以没有根标签</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">姓名</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">name</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">age</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改名字</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeAge&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">+</span><span style="color:#d7827e">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;showTel&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我查看联系方式</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;App&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#d7827e">data</span><span style="color:#797593">()</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>      <span style="color:#286983">return</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>        <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;张三&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>        <span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">18</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>        <span style="color:#d7827e">tel</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;13888888888&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>    <span style="color:#d7827e">methods</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>      <span style="color:#d7827e">changeName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>        <span style="color:#286983">this</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;zhang-san&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>      <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>      <span style="color:#d7827e">changeAge</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>        <span style="color:#286983">this</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>      <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>      <span style="color:#d7827e">showTel</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>        <span style="color:#d7827e">alert</span><span style="color:#797593">(</span><span style="color:#286983">this</span><span style="color:#797593">.</span><span style="color:#d7827e">tel</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>    <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="24-控制台调试">2.4. 【控制台调试】</h2>
<p>下载<a href="https://chrome.zzzmh.cn/info/nhdogjmejiglipccpnnnanhbledajbpd">Vue.js官方调试工具</a>，解压后将其中的crx插件拖入chrome的扩展程序，即可安装，然后就可以在f12里面看见了。</p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/image-20240424171908531.png">
<img src="/img/image-20240424171908531.png" alt="image-20240424171908531"  />
</a>
</div>

</p>
<h1 id="3-vue3核心语法">3. Vue3核心语法</h1>
<h2 id="31--optionsapi-与-compositionapi">3.1.  【OptionsAPI 与 CompositionAPI】</h2>
<ul>
<li><code>Vue2</code>的<code>API</code>设计是<code>Options</code>（配置）风格的。</li>
<li><code>Vue3</code>的<code>API</code>设计是<code>Composition</code>（组合）风格的。</li>
</ul>
<h3 id="options-api-的弊端">Options API 的弊端</h3>
<p><code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的，若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279-1713945304772.gif">
<img src="/img/1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279-1713945304772.gif" alt="1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279"  />
</a>
</div>




<div class="post-img-view">
<a data-fancybox="gallery" href="/img/1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be-1713945324101.gif">
<img src="/img/1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be-1713945324101.gif" alt="1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be"  />
</a>
</div>

</p>
<h3 id="composition-api-的优势">Composition API 的优势</h3>
<p>可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。</p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a-1713945367986.gif">
<img src="/img/1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a-1713945367986.gif" alt="1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a"  />
</a>
</div>




<div class="post-img-view">
<a data-fancybox="gallery" href="/img/1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0-1713945372432.gif">
<img src="/img/1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0-1713945372432.gif" alt="1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0"  />
</a>
</div>

</p>
<blockquote>
<p>说明：以上四张动图原创作者：大帅老猿</p>
</blockquote>
<h2 id="32-拉开序幕的-setup">3.2. 【拉开序幕的 setup】</h2>
<h3 id="setup-概述">setup 概述</h3>
<p><code>setup</code>是<code>Vue3</code>中一个新的配置项，值是一个函数，它是 <code>Composition API</code> <strong>“表演的舞台</strong><em><strong>”</strong></em>，组件中所用到的：数据、方法、计算属性、监视&hellip;&hellip;等等，均配置在<code>setup</code>中。</p>
<p>特点如下：</p>
<ul>
<li><code>setup</code>函数返回的对象中的内容，可直接在模板中使用。</li>
<li><code>setup</code>中访问<code>this</code>是<code>undefined</code>。</li>
<li><code>setup</code>函数会在<code>beforeCreate</code>之前调用，它是“领先”所有钩子执行的。</li>
</ul>
<blockquote>
<p>第20行：

<mark>数据（注意：此时的name、age、tel都不是响应式数据）</mark>



</p>


<mark> 其中响应式可以简单理解为：后期数据变化了，会进行自动更新 </mark>




</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">姓名</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">name</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">age</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改名字</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeAge&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">+</span><span style="color:#d7827e">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;showTel&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我查看联系方式</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;Person&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#d7827e">setup</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>      <span style="color:#9893a5">// 数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#9893a5"></span>        
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>      <span style="color:#286983">let</span> <span style="color:#d7827e">name</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;张三&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>      <span style="color:#286983">let</span> <span style="color:#d7827e">age</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">18</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>      <span style="color:#286983">let</span> <span style="color:#d7827e">tel</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;13888888888&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>      <span style="color:#9893a5">// 方法，原来写在methods中
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#9893a5"></span>      <span style="color:#286983">function</span> <span style="color:#d7827e">changeName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>        <span style="color:#d7827e">name</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;zhang-san&#39;</span> <span style="color:#9893a5">//注意：此时这么修改name页面是不变化的
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#9893a5"></span>        <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">name</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>      <span style="color:#286983">function</span> <span style="color:#d7827e">changeAge</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>        <span style="color:#d7827e">age</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span> <span style="color:#9893a5">//注意：此时这么修改age页面是不变化的
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#9893a5"></span>        <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">age</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>      <span style="color:#286983">function</span> <span style="color:#d7827e">showTel</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>        <span style="color:#d7827e">alert</span><span style="color:#797593">(</span><span style="color:#d7827e">tel</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>      <span style="color:#9893a5">// 返回一个对象，对象中的内容，模板中可以直接使用
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span><span style="color:#9893a5"></span>      <span style="color:#286983">return</span> <span style="color:#797593">{</span><span style="color:#d7827e">name</span><span style="color:#797593">,</span><span style="color:#d7827e">age</span><span style="color:#797593">,</span><span style="color:#d7827e">tel</span><span style="color:#797593">,</span><span style="color:#d7827e">changeName</span><span style="color:#797593">,</span><span style="color:#d7827e">changeAge</span><span style="color:#797593">,</span><span style="color:#d7827e">showTel</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h3 id="setup-的返回值">setup 的返回值</h3>
<ul>
<li>若返回一个<strong>对象</strong>：则对象中的：属性、方法等，在模板中均可以直接使用**（重点关注）。**</li>
<li>若返回一个<strong>函数</strong>：则可以自定义渲染内容，代码如下：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#d7827e">setup</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>  <span style="color:#286983">return</span> <span style="color:#797593">()=&gt;</span> <span style="color:#ea9d34">&#39;你好啊！&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#797593">}</span>
</span></span></code></pre></div><h3 id="setup-与-options-api-的关系">setup 与 Options API 的关系</h3>
<blockquote>
<ul>
<li><code>Vue2</code> 的配置（<code>data</code>、<code>methos</code>&hellip;&hellip;）中<strong>可以访问到</strong> <code>setup</code>中的属性、方法。</li>
<li>但在<code>setup</code>中<strong>不能访问到</strong><code>Vue2</code>的配置（<code>data</code>、<code>methods</code>&hellip;&hellip;）。</li>
<li>如果与<code>Vue2</code>冲突，则<code>setup</code>优先。</li>
</ul>
</blockquote>
<h3 id="setup-语法糖">setup 语法糖</h3>
<p><code>setup</code>函数有一个语法糖，这个语法糖，可以让我们把<code>setup</code>独立出去，代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">姓名</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">name</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">age</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改名字</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changAge&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">+</span><span style="color:#d7827e">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;showTel&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我查看联系方式</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;Person&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">下面的写法是setup语法糖</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>  <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#286983">this</span><span style="color:#797593">)</span> <span style="color:#9893a5">//undefined
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#9893a5"></span>  <span style="color:#9893a5">//数据（注意：此时的name、age、tel都不是响应式数据）
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">name</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;张三&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">age</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">18</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">tel</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;13888888888&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>    <span style="color:#d7827e">name</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;李四&#39;</span><span style="color:#9893a5">//注意：此时这么修改name页面是不变化的
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#9893a5"></span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changAge</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">age</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>    <span style="color:#d7827e">age</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span> <span style="color:#9893a5">//注意：此时这么修改age页面是不变化的
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span><span style="color:#9893a5"></span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">showTel</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>    <span style="color:#d7827e">alert</span><span style="color:#797593">(</span><span style="color:#d7827e">tel</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><p>扩展：上述代码，还需要编写一个不写<code>setup</code>的<code>script</code>标签，去指定组件名字，比较麻烦，我们可以借助<code>vite</code>中的插件简化</p>
<ol>
<li>第一步：<code>npm i vite-plugin-vue-setup-extend -D</code></li>
<li>第二步：<code>vite.config.ts</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">defineConfig</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vite&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">VueSetupExtend</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vite-plugin-vue-setup-extend&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#d7827e">defineConfig</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>  <span style="color:#d7827e">plugins</span><span style="color:#797593">:</span> <span style="color:#797593">[</span> <span style="color:#d7827e">VueSetupExtend</span><span style="color:#797593">()</span> <span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div><ol start="3">
<li>第三步：<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li>
</ol>
<h2 id="33-ref-创建基本类型的响应式数据">3.3. 【ref 创建：基本类型的响应式数据】</h2>
<ul>
<li>**作用：**定义响应式变量。</li>
<li><strong>语法：</strong><code>let xxx = ref(初始值)</code>。</li>
<li>**返回值：**一个<code>RefImpl</code>的实例对象，简称<code>ref对象</code>或<code>ref</code>，<code>ref</code>对象的<code>value</code><strong>属性是响应式的</strong>。</li>
<li><strong>注意点：</strong>
<ul>
<li><code>JS</code>中操作数据需要：<code>xxx.value</code>，但模板中不需要<code>.value</code>，直接使用即可。</li>
<li>对于<code>let name = ref('张三')</code>来说，<code>name</code>不是响应式的，<code>name.value</code>是响应式的。</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">姓名</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">name</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">age</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改名字</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeAge&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">+</span><span style="color:#d7827e">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;showTel&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我查看联系方式</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#9893a5">// name和age是一个RefImpl的实例对象，简称ref对象，它们的value属性是响应式的。
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">name</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;张三&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">age</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">18</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#9893a5">// tel就是一个普通的字符串，不是响应式的
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">tel</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;13888888888&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    <span style="color:#9893a5">// JS中操作ref对象时候需要.value
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">name</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;李四&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">name</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>    <span style="color:#9893a5">// 注意：name不是响应式的，name.value是响应式的，所以如下代码并不会引起页面的更新。
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#9893a5"></span>    <span style="color:#9893a5">// name = ref(&#39;zhang-san&#39;)
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#9893a5"></span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeAge</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>    <span style="color:#9893a5">// JS中操作ref对象时候需要.value
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">age</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">age</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">showTel</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>    <span style="color:#d7827e">alert</span><span style="color:#797593">(</span><span style="color:#d7827e">tel</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="34-reactive-创建对象类型的响应式数据">3.4. 【reactive 创建：对象类型的响应式数据】</h2>
<ul>
<li><strong>作用：<strong>定义一个</strong>响应式对象</strong>（基本类型不要用它，要用<code>ref</code>，否则报错）</li>
<li><strong>语法：</strong><code>let 响应式对象= reactive(源对象)</code>。</li>
<li>**返回值：**一个<code>Proxy</code>的实例对象，简称：响应式对象。</li>
<li><strong>注意点：</strong><code>reactive</code>定义的响应式数据是“深层次”的。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">汽车信息</span><span style="color:#b4637a">：</span><span style="color:#d7827e">一台</span><span style="color:#797593">{{</span> <span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">brand</span> <span style="color:#797593">}}</span><span style="color:#d7827e">汽车</span><span style="color:#b4637a">，</span><span style="color:#d7827e">价值</span><span style="color:#797593">{{</span> <span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">price</span> <span style="color:#797593">}}</span><span style="color:#d7827e">万</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">游戏列表</span><span style="color:#b4637a">：</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">ul</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">li</span> <span style="color:#d7827e">v-for</span><span style="color:#ea9d34">=&#34;g in games&#34; :key=&#34;g.id&#34;&gt;{{ g.name }}&lt;/li&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">    &lt;/ul&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">    &lt;h2&gt;测试：{{obj.a.b.c.d}}&lt;/h2&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">    &lt;button @click=&#34;changeCarPrice&#34;&gt;修改汽车价格&lt;/button&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#ea9d34">    &lt;button @click=&#34;changeFirstGame&#34;&gt;修改第一游戏&lt;/button&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#ea9d34">    &lt;button @click=&#34;test&#34;&gt;测试&lt;/button&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#ea9d34">  &lt;/div&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#ea9d34">&lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#ea9d34">&lt;script lang=&#34;ts&#34; setup name=&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#d7827e">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">reactive</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">vue</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#b4637a">//</span> <span style="color:#d7827e">数据</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#d7827e">let</span> <span style="color:#d7827e">car </span><span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#b4637a">(</span><span style="color:#797593">{</span> <span style="color:#d7827e">brand</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">奔驰</span><span style="color:#b4637a">&#39;,</span> <span style="color:#d7827e">price</span><span style="color:#797593">:</span> <span style="color:#d7827e">100</span> <span style="color:#797593">}</span><span style="color:#b4637a">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#d7827e">let</span> <span style="color:#d7827e">games </span><span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#b4637a">([</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>  <span style="color:#797593">{</span> <span style="color:#d7827e">id</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">ahsgdyfa01</span><span style="color:#b4637a">&#39;,</span> <span style="color:#d7827e">name</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">英雄联盟</span><span style="color:#b4637a">&#39;</span> <span style="color:#797593">}</span><span style="color:#b4637a">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>  <span style="color:#797593">{</span> <span style="color:#d7827e">id</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">ahsgdyfa02</span><span style="color:#b4637a">&#39;,</span> <span style="color:#d7827e">name</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">王者荣耀</span><span style="color:#b4637a">&#39;</span> <span style="color:#797593">}</span><span style="color:#b4637a">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>  <span style="color:#797593">{</span> <span style="color:#d7827e">id</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">ahsgdyfa03</span><span style="color:#b4637a">&#39;,</span> <span style="color:#d7827e">name</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">原神</span><span style="color:#b4637a">&#39;</span> <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#b4637a">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#d7827e">let</span> <span style="color:#d7827e">obj </span><span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#b4637a">(</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>  <span style="color:#d7827e">a</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>    <span style="color:#d7827e">b</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>      <span style="color:#d7827e">c</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>        <span style="color:#d7827e">d</span><span style="color:#797593">:</span><span style="color:#d7827e">666</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span><span style="color:#797593">}</span><span style="color:#b4637a">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span><span style="color:#d7827e">function</span> <span style="color:#d7827e">changeCarPrice</span><span style="color:#b4637a">()</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>  <span style="color:#d7827e">car.price</span> <span style="color:#b4637a">+=</span> <span style="color:#d7827e">10</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span><span style="color:#d7827e">function</span> <span style="color:#d7827e">changeFirstGame</span><span style="color:#b4637a">()</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span>  <span style="color:#d7827e">games</span><span style="color:#b4637a">[</span><span style="color:#d7827e">0</span><span style="color:#b4637a">]</span><span style="color:#d7827e">.name</span> <span style="color:#b4637a">=</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">流星蝴蝶剑</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span><span style="color:#d7827e">function</span> <span style="color:#d7827e">test</span><span style="color:#b4637a">()</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span>  <span style="color:#d7827e">obj.a.b.c.d</span> <span style="color:#b4637a">=</span> <span style="color:#d7827e">999</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="35-ref-创建对象类型的响应式数据">3.5. 【ref 创建：对象类型的响应式数据】</h2>
<ul>
<li>其实<code>ref</code>接收的数据可以是：<strong>基本类型</strong>、<strong>对象类型</strong>。</li>
<li>若<code>ref</code>接收的是对象类型，内部其实也是调用了<code>reactive</code>函数。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">汽车信息</span><span style="color:#b4637a">：</span><span style="color:#d7827e">一台</span><span style="color:#797593">{{</span> <span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">brand</span> <span style="color:#797593">}}</span><span style="color:#d7827e">汽车</span><span style="color:#b4637a">，</span><span style="color:#d7827e">价值</span><span style="color:#797593">{{</span> <span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">price</span> <span style="color:#797593">}}</span><span style="color:#d7827e">万</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">游戏列表</span><span style="color:#b4637a">：</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">ul</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">li</span> <span style="color:#d7827e">v-for</span><span style="color:#ea9d34">=&#34;g in games&#34; :key=&#34;g.id&#34;&gt;{{ g.name }}&lt;/li&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">    &lt;/ul&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">    &lt;h2&gt;测试：{{obj.a.b.c.d}}&lt;/h2&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">    &lt;button @click=&#34;changeCarPrice&#34;&gt;修改汽车价格&lt;/button&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#ea9d34">    &lt;button @click=&#34;changeFirstGame&#34;&gt;修改第一游戏&lt;/button&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#ea9d34">    &lt;button @click=&#34;test&#34;&gt;测试&lt;/button&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#ea9d34">  &lt;/div&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#ea9d34">&lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#ea9d34">&lt;script lang=&#34;ts&#34; setup name=&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#d7827e">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">ref</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">vue</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#b4637a">//</span> <span style="color:#d7827e">数据</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#d7827e">let</span> <span style="color:#d7827e">car </span><span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#b4637a">(</span><span style="color:#797593">{</span> <span style="color:#d7827e">brand</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">奔驰</span><span style="color:#b4637a">&#39;,</span> <span style="color:#d7827e">price</span><span style="color:#797593">:</span> <span style="color:#d7827e">100</span> <span style="color:#797593">}</span><span style="color:#b4637a">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#d7827e">let</span> <span style="color:#d7827e">games </span><span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#b4637a">([</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>  <span style="color:#797593">{</span> <span style="color:#d7827e">id</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">ahsgdyfa01</span><span style="color:#b4637a">&#39;,</span> <span style="color:#d7827e">name</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">英雄联盟</span><span style="color:#b4637a">&#39;</span> <span style="color:#797593">}</span><span style="color:#b4637a">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>  <span style="color:#797593">{</span> <span style="color:#d7827e">id</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">ahsgdyfa02</span><span style="color:#b4637a">&#39;,</span> <span style="color:#d7827e">name</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">王者荣耀</span><span style="color:#b4637a">&#39;</span> <span style="color:#797593">}</span><span style="color:#b4637a">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>  <span style="color:#797593">{</span> <span style="color:#d7827e">id</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">ahsgdyfa03</span><span style="color:#b4637a">&#39;,</span> <span style="color:#d7827e">name</span><span style="color:#797593">:</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">原神</span><span style="color:#b4637a">&#39;</span> <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#b4637a">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#d7827e">let</span> <span style="color:#d7827e">obj </span><span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#b4637a">(</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>  <span style="color:#d7827e">a</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>    <span style="color:#d7827e">b</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>      <span style="color:#d7827e">c</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>        <span style="color:#d7827e">d</span><span style="color:#797593">:</span><span style="color:#d7827e">666</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span><span style="color:#797593">}</span><span style="color:#b4637a">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span><span style="color:#d7827e">console.log</span><span style="color:#b4637a">(</span><span style="color:#d7827e">car</span><span style="color:#b4637a">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span><span style="color:#d7827e">function</span> <span style="color:#d7827e">changeCarPrice</span><span style="color:#b4637a">()</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span>  <span style="color:#d7827e">car.value.price</span> <span style="color:#b4637a">+=</span> <span style="color:#d7827e">10</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span><span style="color:#d7827e">function</span> <span style="color:#d7827e">changeFirstGame</span><span style="color:#b4637a">()</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span>  <span style="color:#d7827e">games.value</span><span style="color:#b4637a">[</span><span style="color:#d7827e">0</span><span style="color:#b4637a">]</span><span style="color:#d7827e">.name</span> <span style="color:#b4637a">=</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">流星蝴蝶剑</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span><span style="color:#d7827e">function</span> <span style="color:#d7827e">test</span><span style="color:#b4637a">()</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span>  <span style="color:#d7827e">obj.value.a.b.c.d</span> <span style="color:#b4637a">=</span> <span style="color:#d7827e">999</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span><span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="36-ref-对比-reactive">3.6. 【ref 对比 reactive】</h2>
<p>宏观角度看：</p>
<blockquote>
<ol>
<li>
<p><code>ref</code>用来定义：<strong>基本类型数据</strong>、<strong>对象类型数据</strong>；</p>
</li>
<li>
<p><code>reactive</code>用来定义：<strong>对象类型数据</strong>。</p>
</li>
</ol>
</blockquote>
<ul>
<li>区别：</li>
</ul>
<blockquote>
<ol>
<li>
<p><code>ref</code>创建的变量必须使用<code>.value</code>（可以使用<code>volar</code>插件自动添加<code>.value</code>）。</p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/%e8%87%aa%e5%8a%a8%e8%a1%a5%e5%85%85value-1713945409353.png">
<img src="/img/%e8%87%aa%e5%8a%a8%e8%a1%a5%e5%85%85value-1713945409353.png" alt="自动补充value"  />
</a>
</div>

</p>
</li>
<li>
<p><code>reactive</code>重新分配一个新对象，会<strong>失去</strong>响应式（可以使用<code>Object.assign</code>去整体替换）。</p>
</li>
</ol>
</blockquote>
<ul>
<li>使用原则：</li>
</ul>
<blockquote>
<ol>
<li>若需要一个基本类型的响应式数据，必须使用<code>ref</code>。</li>
<li>若需要一个响应式对象，层级不深，<code>ref</code>、<code>reactive</code>都可以。</li>
<li>若需要一个响应式对象，且层级较深，推荐使用<code>reactive</code>。</li>
</ol>
</blockquote>
<h2 id="37-torefs-与-toref">3.7. 【toRefs 与 toRef】</h2>
<ul>
<li>作用：将一个响应式对象中的每一个属性，转换为<code>ref</code>对象。</li>
<li>备注：<code>toRefs</code>与<code>toRef</code>功能一致，但<code>toRefs</code>可以批量转换。</li>
<li>语法如下：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">姓名</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">性别</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">gender</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改名字</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeAge&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改年龄</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeGender&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改性别</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">,</span><span style="color:#d7827e">reactive</span><span style="color:#797593">,</span><span style="color:#d7827e">toRefs</span><span style="color:#797593">,</span><span style="color:#d7827e">toRef</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>  <span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">person</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">({</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;张三&#39;</span><span style="color:#797593">,</span> <span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">18</span><span style="color:#797593">,</span> <span style="color:#d7827e">gender</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;男&#39;</span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>	
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>  <span style="color:#9893a5">// 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#797593">{</span><span style="color:#d7827e">name</span><span style="color:#797593">,</span><span style="color:#d7827e">gender</span><span style="color:#797593">}</span> <span style="color:#797593">=</span>  <span style="color:#d7827e">toRefs</span><span style="color:#797593">(</span><span style="color:#d7827e">person</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>	
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>  <span style="color:#9893a5">// 通过toRef将person对象中的gender属性取出，且依然保持响应式的能力
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">age</span> <span style="color:#797593">=</span> <span style="color:#d7827e">toRef</span><span style="color:#797593">(</span><span style="color:#d7827e">person</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;age&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">&#39;~&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeAge</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>    <span style="color:#d7827e">age</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeGender</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>    <span style="color:#d7827e">gender</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;女&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="38-computed">3.8. 【computed】</h2>
<p>作用：根据已有数据计算出新数据（和<code>Vue2</code>中的<code>computed</code>作用一致）。</p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/computed-1713945451925.gif">
<img src="/img/computed-1713945451925.gif" alt="computed"  />
</a>
</div>

</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#d7827e">姓</span><span style="color:#b4637a">：</span><span style="color:#797593">&lt;</span><span style="color:#d7827e">input</span> <span style="color:#d7827e">type</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;text&#34;</span> <span style="color:#d7827e">v-model</span><span style="color:#ea9d34">=&#34;firstName&#34;</span><span style="color:#797593">&gt;</span> <span style="color:#797593">&lt;</span><span style="color:#d7827e">br</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#d7827e">名</span><span style="color:#b4637a">：</span><span style="color:#797593">&lt;</span><span style="color:#d7827e">input</span> <span style="color:#d7827e">type</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;text&#34;</span> <span style="color:#d7827e">v-model</span><span style="color:#ea9d34">=&#34;lastName&#34;</span><span style="color:#797593">&gt;</span> <span style="color:#797593">&lt;</span><span style="color:#d7827e">br</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#d7827e">全名</span><span style="color:#b4637a">：</span><span style="color:#797593">&lt;</span><span style="color:#d7827e">span</span><span style="color:#797593">&gt;{{</span><span style="color:#d7827e">fullName</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">span</span><span style="color:#797593">&gt;</span> <span style="color:#797593">&lt;</span><span style="color:#d7827e">br</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeFullName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">全名改为</span><span style="color:#b4637a">：</span><span style="color:#d7827e">li</span><span style="color:#d7827e">-si</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;App&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">,</span><span style="color:#d7827e">computed</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">firstName</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;zhang&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">lastName</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;san&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#9893a5">// 计算属性——只读取，不修改
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5"></span>  <span style="color:#9893a5">/* let fullName = computed(()=&gt;{
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#9893a5">    return firstName.value + &#39;-&#39; + lastName.value
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#9893a5">  }) */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>  <span style="color:#9893a5">// 计算属性——既读取又修改
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">fullName</span> <span style="color:#797593">=</span> <span style="color:#d7827e">computed</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>    <span style="color:#9893a5">// 读取
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">get</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>      <span style="color:#286983">return</span> <span style="color:#d7827e">firstName</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+</span> <span style="color:#ea9d34">&#39;-&#39;</span> <span style="color:#797593">+</span> <span style="color:#d7827e">lastName</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>    <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>    <span style="color:#9893a5">// 修改
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">set</span><span style="color:#797593">(</span><span style="color:#d7827e">val</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;有人修改了fullName&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">val</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>      <span style="color:#d7827e">firstName</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">=</span> <span style="color:#d7827e">val</span><span style="color:#797593">.</span><span style="color:#d7827e">split</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;-&#39;</span><span style="color:#797593">)[</span><span style="color:#ea9d34">0</span><span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>      <span style="color:#d7827e">lastName</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">=</span> <span style="color:#d7827e">val</span><span style="color:#797593">.</span><span style="color:#d7827e">split</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;-&#39;</span><span style="color:#797593">)[</span><span style="color:#ea9d34">1</span><span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeFullName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>    <span style="color:#d7827e">fullName</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;li-si&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span>  <span style="color:#797593">}</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="39watch">3.9.【watch】</h2>
<ul>
<li>作用：监视数据的变化（和<code>Vue2</code>中的<code>watch</code>作用一致）</li>
<li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下<strong>四种数据</strong>：</li>
</ul>
<blockquote>
<ol>
<li><code>ref</code>定义的数据。</li>
<li><code>reactive</code>定义的数据。</li>
<li>函数返回一个值（<code>getter</code>函数）。</li>
<li>一个包含上述内容的数组。</li>
</ol>
</blockquote>
<p>我们在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况：</p>
<h3 id="-情况一">* 情况一</h3>
<p>监视<code>ref</code>定义的【基本类型】数据：直接写数据名即可，监视的是其<code>value</code>值的改变。</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">情况一</span><span style="color:#b4637a">：</span><span style="color:#d7827e">监视</span><span style="color:#b4637a">【</span><span style="color:#d7827e">ref</span><span style="color:#b4637a">】</span><span style="color:#d7827e">定义的</span><span style="color:#b4637a">【</span><span style="color:#d7827e">基本类型</span><span style="color:#b4637a">】</span><span style="color:#d7827e">数据</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">当前求和为</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">sum</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeSum&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我sum</span><span style="color:#b4637a">+</span><span style="color:#d7827e">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">,</span><span style="color:#d7827e">watch</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">sum</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">0</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeSum</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>    <span style="color:#d7827e">sum</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>  <span style="color:#9893a5">// 监视，情况一：监视【ref】定义的【基本类型】数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">const</span> <span style="color:#d7827e">stopWatch</span> <span style="color:#797593">=</span> <span style="color:#d7827e">watch</span><span style="color:#797593">(</span><span style="color:#d7827e">sum</span><span style="color:#797593">,(</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;sum变化了&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    <span style="color:#286983">if</span><span style="color:#797593">(</span><span style="color:#d7827e">newValue</span> <span style="color:#797593">&gt;=</span> <span style="color:#ea9d34">10</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>      <span style="color:#d7827e">stopWatch</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h3 id="-情况二">* 情况二</h3>
<p>监视<code>ref</code>定义的【对象类型】数据：直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视。</p>
<blockquote>
<p>注意：</p>
<ul>
<li>
<p>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象。</p>
</li>
<li>
<p>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了。</p>
</li>
</ul>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">情况二</span><span style="color:#b4637a">：</span><span style="color:#d7827e">监视</span><span style="color:#b4637a">【</span><span style="color:#d7827e">ref</span><span style="color:#b4637a">】</span><span style="color:#d7827e">定义的</span><span style="color:#b4637a">【</span><span style="color:#d7827e">对象类型</span><span style="color:#b4637a">】</span><span style="color:#d7827e">数据</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">姓名</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改名字</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeAge&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改年龄</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changePerson&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改整个人</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">,</span><span style="color:#d7827e">watch</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">person</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;张三&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>    <span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">18</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">&#39;~&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeAge</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changePerson</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">=</span> <span style="color:#797593">{</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;李四&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">90</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>  <span style="color:#9893a5">/* 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span><span style="color:#9893a5">    监视，情况一：监视【ref】定义的【对象类型】数据，监视的是对象的地址值，若想监视对象内部属性的变化，需要手动开启深度监视
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span><span style="color:#9893a5">    watch的第一个参数是：被监视的数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span><span style="color:#9893a5">    watch的第二个参数是：监视的回调
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span><span style="color:#9893a5">    watch的第三个参数是：配置对象（deep、immediate等等.....） 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span><span style="color:#9893a5">  */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>  <span style="color:#d7827e">watch</span><span style="color:#797593">(</span><span style="color:#d7827e">person</span><span style="color:#797593">,(</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;person变化了&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>  <span style="color:#797593">},{</span><span style="color:#d7827e">deep</span><span style="color:#797593">:</span><span style="color:#286983">true</span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span>  
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h3 id="--情况三">*  情况三</h3>
<p>监视<code>reactive</code>定义的【对象类型】数据，且默认开启了深度监视。</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">情况三</span><span style="color:#b4637a">：</span><span style="color:#d7827e">监视</span><span style="color:#b4637a">【</span><span style="color:#d7827e">reactive</span><span style="color:#b4637a">】</span><span style="color:#d7827e">定义的</span><span style="color:#b4637a">【</span><span style="color:#d7827e">对象类型</span><span style="color:#b4637a">】</span><span style="color:#d7827e">数据</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">姓名</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改名字</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeAge&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改年龄</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changePerson&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改整个人</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">hr</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">测试</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">obj</span><span style="color:#797593">.</span><span style="color:#d7827e">a</span><span style="color:#797593">.</span><span style="color:#d7827e">b</span><span style="color:#797593">.</span><span style="color:#d7827e">c</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;test&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改obj.a.b.c</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">reactive</span><span style="color:#797593">,</span><span style="color:#d7827e">watch</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>  <span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">person</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;张三&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    <span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">18</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">obj</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>    <span style="color:#d7827e">a</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>      <span style="color:#d7827e">b</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>        <span style="color:#d7827e">c</span><span style="color:#797593">:</span><span style="color:#ea9d34">666</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">&#39;~&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeAge</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changePerson</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>    <span style="color:#d7827e">Object</span><span style="color:#797593">.</span><span style="color:#d7827e">assign</span><span style="color:#797593">(</span><span style="color:#d7827e">person</span><span style="color:#797593">,{</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;李四&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">80</span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">test</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span>    <span style="color:#d7827e">obj</span><span style="color:#797593">.</span><span style="color:#d7827e">a</span><span style="color:#797593">.</span><span style="color:#d7827e">b</span><span style="color:#797593">.</span><span style="color:#d7827e">c</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">888</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span>  <span style="color:#9893a5">// 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">watch</span><span style="color:#797593">(</span><span style="color:#d7827e">person</span><span style="color:#797593">,(</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;person变化了&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span><span>  <span style="color:#d7827e">watch</span><span style="color:#797593">(</span><span style="color:#d7827e">obj</span><span style="color:#797593">,(</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;Obj变化了&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h3 id="-情况四">* 情况四</h3>
<p>监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<strong>某个属性</strong>，注意点如下：</p>
<ol>
<li>若该属性值<strong>不是</strong>【对象类型】，需要写成函数形式。</li>
<li>若该属性值是<strong>依然</strong>是【对象类型】，可直接编，也可写成函数，建议写成函数。</li>
</ol>
<p>结论：监视的要是对象里的属性，那么最好写函数式，注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">情况四</span><span style="color:#b4637a">：</span><span style="color:#d7827e">监视</span><span style="color:#b4637a">【</span><span style="color:#d7827e">ref</span><span style="color:#b4637a">】</span><span style="color:#d7827e">或</span><span style="color:#b4637a">【</span><span style="color:#d7827e">reactive</span><span style="color:#b4637a">】</span><span style="color:#d7827e">定义的</span><span style="color:#b4637a">【</span><span style="color:#d7827e">对象类型</span><span style="color:#b4637a">】</span><span style="color:#d7827e">数据中的某个属性</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">姓名</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">汽车</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">c1</span> <span style="color:#797593">}}</span><span style="color:#b4637a">、</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">c2</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改名字</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeAge&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改年龄</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeC1&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改第一台车</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeC2&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改第二台车</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeCar&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改整个车</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">reactive</span><span style="color:#797593">,</span><span style="color:#d7827e">watch</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>  <span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">person</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;张三&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>    <span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">18</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>    <span style="color:#d7827e">car</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>      <span style="color:#d7827e">c1</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;奔驰&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>      <span style="color:#d7827e">c2</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;宝马&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">&#39;~&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeAge</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeC1</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">c1</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;奥迪&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeC2</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">c2</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;大众&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeCar</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span> <span style="color:#797593">=</span> <span style="color:#797593">{</span><span style="color:#d7827e">c1</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;雅迪&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">c2</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;爱玛&#39;</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span>  <span style="color:#9893a5">// 监视，情况四：监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span><span><span style="color:#9893a5"></span>  <span style="color:#9893a5">/* watch(()=&gt; person.name,(newValue,oldValue)=&gt;{
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span><span style="color:#9893a5">    console.log(&#39;person.name变化了&#39;,newValue,oldValue)
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span><span><span style="color:#9893a5">  }) */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span><span>  <span style="color:#9893a5">// 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">watch</span><span style="color:#797593">(()=&gt;</span><span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">,(</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;person.car变化了&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52</span><span>  <span style="color:#797593">},{</span><span style="color:#d7827e">deep</span><span style="color:#797593">:</span><span style="color:#286983">true</span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h3 id="-情况五">* 情况五</h3>
<p>监视上述的多个数据</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">情况五</span><span style="color:#b4637a">：</span><span style="color:#d7827e">监视上述的多个数据</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">姓名</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">年龄</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">汽车</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">c1</span> <span style="color:#797593">}}</span><span style="color:#b4637a">、</span><span style="color:#797593">{{</span> <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">c2</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeName&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改名字</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeAge&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改年龄</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeC1&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改第一台车</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeC2&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改第二台车</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeCar&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">修改整个车</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">reactive</span><span style="color:#797593">,</span><span style="color:#d7827e">watch</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>  <span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">person</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;张三&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>    <span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">18</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>    <span style="color:#d7827e">car</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>      <span style="color:#d7827e">c1</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;奔驰&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>      <span style="color:#d7827e">c2</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;宝马&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeName</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">&#39;~&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeAge</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeC1</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">c1</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;奥迪&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeC2</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">.</span><span style="color:#d7827e">c2</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;大众&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeCar</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span>    <span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span> <span style="color:#797593">=</span> <span style="color:#797593">{</span><span style="color:#d7827e">c1</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;雅迪&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">c2</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;爱玛&#39;</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span>  <span style="color:#9893a5">// 监视，情况五：监视上述的多个数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">watch</span><span style="color:#797593">([()=&gt;</span><span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span><span style="color:#797593">,</span><span style="color:#d7827e">person</span><span style="color:#797593">.</span><span style="color:#d7827e">car</span><span style="color:#797593">],(</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;person.car变化了&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">newValue</span><span style="color:#797593">,</span><span style="color:#d7827e">oldValue</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span><span>  <span style="color:#797593">},{</span><span style="color:#d7827e">deep</span><span style="color:#797593">:</span><span style="color:#286983">true</span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="310-watcheffect">3.10. 【watchEffect】</h2>
<ul>
<li>
<p>官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</p>
</li>
<li>
<p><code>watch</code>对比<code>watchEffect</code></p>
<blockquote>
<ol>
<li>
<p>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</p>
</li>
<li>
<p><code>watch</code>：要明确指出监视的数据</p>
</li>
<li>
<p><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性）。</p>
</li>
</ol>
</blockquote>
</li>
<li>
<p>示例代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">需求</span><span style="color:#b4637a">：</span><span style="color:#d7827e">水温达到50</span><span style="color:#b4637a">℃，</span><span style="color:#d7827e">或水位达到20cm</span><span style="color:#b4637a">，</span><span style="color:#d7827e">则联系服务器</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span> <span style="color:#d7827e">id</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;demo&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">水温</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">temp</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">水位</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">height</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changePrice&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">水温</span><span style="color:#b4637a">+</span><span style="color:#d7827e">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeSum&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">水位</span><span style="color:#b4637a">+</span><span style="color:#d7827e">10</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">,</span><span style="color:#d7827e">watch</span><span style="color:#797593">,</span><span style="color:#d7827e">watchEffect</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">temp</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">0</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">height</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">0</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changePrice</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    <span style="color:#d7827e">temp</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">10</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeSum</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>    <span style="color:#d7827e">height</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>  <span style="color:#9893a5">// 用watch实现，需要明确的指出要监视：temp、height
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">watch</span><span style="color:#797593">([</span><span style="color:#d7827e">temp</span><span style="color:#797593">,</span><span style="color:#d7827e">height</span><span style="color:#797593">],(</span><span style="color:#d7827e">value</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>    <span style="color:#9893a5">// 从value中获取最新的temp值、height值
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#9893a5"></span>    <span style="color:#286983">const</span> <span style="color:#797593">[</span><span style="color:#d7827e">newTemp</span><span style="color:#797593">,</span><span style="color:#d7827e">newHeight</span><span style="color:#797593">]</span> <span style="color:#797593">=</span> <span style="color:#d7827e">value</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>    <span style="color:#9893a5">// 室温达到50℃，或水位达到20cm，立刻联系服务器
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span><span style="color:#9893a5"></span>    <span style="color:#286983">if</span><span style="color:#797593">(</span><span style="color:#d7827e">newTemp</span> <span style="color:#797593">&gt;=</span> <span style="color:#ea9d34">50</span> <span style="color:#797593">||</span> <span style="color:#d7827e">newHeight</span> <span style="color:#797593">&gt;=</span> <span style="color:#ea9d34">20</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;联系服务器&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>  <span style="color:#9893a5">// 用watchEffect实现，不用
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">const</span> <span style="color:#d7827e">stopWtach</span> <span style="color:#797593">=</span> <span style="color:#d7827e">watchEffect</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>    <span style="color:#9893a5">// 室温达到50℃，或水位达到20cm，立刻联系服务器
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span><span style="color:#9893a5"></span>    <span style="color:#286983">if</span><span style="color:#797593">(</span><span style="color:#d7827e">temp</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">&gt;=</span> <span style="color:#ea9d34">50</span> <span style="color:#797593">||</span> <span style="color:#d7827e">height</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">&gt;=</span> <span style="color:#ea9d34">20</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">getElementById</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;demo&#39;</span><span style="color:#797593">)</span><span style="color:#797593">?</span><span style="color:#797593">.</span><span style="color:#d7827e">innerText</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;联系服务器&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span>    <span style="color:#9893a5">// 水温达到100，或水位达到50，取消监视
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span><span style="color:#9893a5"></span>    <span style="color:#286983">if</span><span style="color:#797593">(</span><span style="color:#d7827e">temp</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">===</span> <span style="color:#ea9d34">100</span> <span style="color:#797593">||</span> <span style="color:#d7827e">height</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">===</span> <span style="color:#ea9d34">50</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;清理了&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span><span>      <span style="color:#d7827e">stopWtach</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h2 id="311-标签的-ref-属性">3.11. 【标签的 ref 属性】</h2>
<p>作用：用于注册模板引用。</p>
<blockquote>
<ul>
<li>
<p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p>
</li>
<li>
<p>用在组件标签上，获取的是组件实例对象。</p>
</li>
</ul>
</blockquote>
<p>用在普通<code>DOM</code>标签上：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h1</span> <span style="color:#d7827e">ref</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;title1&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">尚硅谷</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h1</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span> <span style="color:#d7827e">ref</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;title2&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">前端</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span> <span style="color:#d7827e">ref</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;title3&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">Vue</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">input</span> <span style="color:#d7827e">type</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;text&#34;</span> <span style="color:#d7827e">ref</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;inpt&#34;</span><span style="color:#797593">&gt;</span> <span style="color:#797593">&lt;</span><span style="color:#d7827e">br</span><span style="color:#797593">&gt;&lt;</span><span style="color:#d7827e">br</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;showLog&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我打印内容</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>	
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">title1</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">title2</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">title3</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">showLog</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    <span style="color:#9893a5">// 通过id获取元素
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#9893a5"></span>    <span style="color:#286983">const</span> <span style="color:#d7827e">t1</span> <span style="color:#797593">=</span> <span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">getElementById</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;title1&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>    <span style="color:#9893a5">// 打印内容
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">((</span><span style="color:#d7827e">t1</span> <span style="color:#d7827e">as</span> <span style="color:#d7827e">HTMLElement</span><span style="color:#797593">).</span><span style="color:#d7827e">innerText</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">((&lt;</span><span style="color:#d7827e">HTMLElement</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">t1</span><span style="color:#797593">).</span><span style="color:#d7827e">innerText</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">t1</span><span style="color:#797593">?</span><span style="color:#797593">.</span><span style="color:#d7827e">innerText</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>		<span style="color:#9893a5">/************************************/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>		
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>    <span style="color:#9893a5">// 通过ref获取元素
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">title1</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">title2</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">title3</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><p>用在组件标签上：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">父组件App</span><span style="color:#797593">.</span><span style="color:#d7827e">vue</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">Person</span> <span style="color:#d7827e">ref</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ren&#34;</span><span style="color:#797593">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;test&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">测试</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;App&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#286983">import</span> <span style="color:#d7827e">Person</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;./components/Person.vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">ren</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#286983">function</span> <span style="color:#d7827e">test</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">ren</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">.</span><span style="color:#d7827e">name</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">ren</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">.</span><span style="color:#d7827e">age</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">子组件Person</span><span style="color:#797593">.</span><span style="color:#d7827e">vue中要使用defineExpose暴露内容</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">,</span><span style="color:#d7827e">defineExpose</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>	<span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">name</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;张三&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">age</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">18</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>  <span style="color:#9893a5">/****************************/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>  <span style="color:#9893a5">/****************************/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>  <span style="color:#9893a5">// 使用defineExpose将组件中的数据交给外部
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">defineExpose</span><span style="color:#797593">({</span><span style="color:#d7827e">name</span><span style="color:#797593">,</span><span style="color:#d7827e">age</span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="312-props">3.12. 【props】</h2>
<blockquote>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">// 定义一个接口，限制每个Person对象的格式
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#9893a5"></span><span style="color:#286983">export</span> <span style="color:#286983">interface</span> <span style="color:#d7827e">PersonInter</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#d7827e">string</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#d7827e">string</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span> <span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#d7827e">number</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="color:#9893a5">// 定义一个自定义类型Persons
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span><span style="color:#9893a5"></span><span style="color:#286983">export</span> <span style="color:#d7827e">type</span> <span style="color:#d7827e">Persons</span> <span style="color:#797593">=</span> <span style="color:#d7827e">Array</span><span style="color:#797593">&lt;</span><span style="color:#d7827e">PersonInter</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><p><code>App.vue</code>中代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>	<span style="color:#797593">&lt;</span><span style="color:#d7827e">Person</span> <span style="color:#d7827e">:list</span><span style="color:#ea9d34">=&#34;persons&#34;</span><span style="color:#797593">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;App&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">Person</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;./components/Person.vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">reactive</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span> <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">type</span> <span style="color:#d7827e">Persons</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;./types&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span> <span style="color:#286983">let</span> <span style="color:#d7827e">persons</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">&lt;</span><span style="color:#d7827e">Persons</span><span style="color:#797593">&gt;([</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;e98219e12&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;张三&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">18</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>   <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;e98219e13&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;李四&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">19</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;e98219e14&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;王五&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">20</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><p><code>Person.vue</code>中代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Vue" data-lang="Vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">ul</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">li</span> <span style="color:#d7827e">v-for</span><span style="color:#ea9d34">=&#34;item in list&#34; :key=&#34;item.id&#34;&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#ea9d34">     {{item.name}}--{{item.age}}
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#ea9d34">   &lt;/li&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34"> &lt;/ul&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">&lt;/div&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">&lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#ea9d34">&lt;script lang=&#34;ts&#34; setup name=&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#d7827e">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">defineProps</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">vue</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#d7827e">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">type</span> <span style="color:#d7827e">PersonInter</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;@/</span><span style="color:#d7827e">types</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#b4637a">//</span> <span style="color:#d7827e">第一种写法</span><span style="color:#b4637a">：</span><span style="color:#d7827e">仅接收</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#b4637a">//</span> <span style="color:#d7827e">const</span> <span style="color:#d7827e">props </span><span style="color:#797593">=</span> <span style="color:#d7827e">defineProps</span><span style="color:#b4637a">([&#39;</span><span style="color:#d7827e">list</span><span style="color:#b4637a">&#39;])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#b4637a">//</span> <span style="color:#d7827e">第二种写法</span><span style="color:#b4637a">：</span><span style="color:#d7827e">接收</span><span style="color:#b4637a">+</span><span style="color:#d7827e">限制类型</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#b4637a">//</span> <span style="color:#d7827e">defineProps</span><span style="color:#b4637a">&lt;</span><span style="color:#797593">{</span><span style="color:#d7827e">list</span><span style="color:#797593">:</span><span style="color:#d7827e">Persons</span><span style="color:#797593">}&gt;()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#9893a5">// 第三种写法：接收+限制类型+指定默认值+限制必要性
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#9893a5"></span><span style="color:#286983">let</span> <span style="color:#d7827e">props</span> <span style="color:#797593">=</span> <span style="color:#d7827e">withDefaults</span><span style="color:#797593">(</span><span style="color:#d7827e">defineProps</span><span style="color:#797593">&lt;</span><span style="color:#797593">{</span><span style="color:#d7827e">list</span><span style="color:#797593">?:</span><span style="color:#d7827e">Persons</span><span style="color:#797593">}</span><span style="color:#797593">&gt;</span><span style="color:#797593">(),{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>  <span style="color:#d7827e">list</span><span style="color:#797593">:</span><span style="color:#797593">()=&gt;[{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;asdasg01&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;小猪佩奇&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">18</span><span style="color:#797593">}]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">props</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></blockquote>
<h2 id="313-生命周期">3.13. 【生命周期】</h2>
<ul>
<li>
<p>概念：<code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子</p>
</li>
<li>
<p>规律：</p>
<blockquote>
<p>生命周期整体分为四个阶段，分别是：<strong>创建、挂载、更新、销毁</strong>，每个阶段都有两个钩子，一前一后。</p>
</blockquote>
</li>
<li>
<p><code>Vue2</code>的生命周期</p>
<blockquote>
<p>创建阶段：<code>beforeCreate</code>、<code>created</code></p>
<p>挂载阶段：<code>beforeMount</code>、<code>mounted</code></p>
<p>更新阶段：<code>beforeUpdate</code>、<code>updated</code></p>
<p>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></p>
</blockquote>
</li>
<li>
<p><code>Vue3</code>的生命周期</p>
<blockquote>
<p>创建阶段：<code>setup</code></p>
<p>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code></p>
<p>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code></p>
<p>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p>
</blockquote>
</li>
<li>
<p>常用的钩子：<code>onMounted</code>(挂载完毕)、<code>onUpdated</code>(更新完毕)、<code>onBeforeUnmount</code>(卸载之前)</p>
</li>
<li>
<p>示例代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">当前求和为</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">sum</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;changeSum&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我sum</span><span style="color:#b4637a">+</span><span style="color:#d7827e">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#b4637a">&lt;!--</span> <span style="color:#d7827e">vue3写法</span> <span style="color:#b4637a">--</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Person&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>    <span style="color:#d7827e">ref</span><span style="color:#797593">,</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    <span style="color:#d7827e">onBeforeMount</span><span style="color:#797593">,</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#d7827e">onMounted</span><span style="color:#797593">,</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#d7827e">onBeforeUpdate</span><span style="color:#797593">,</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>    <span style="color:#d7827e">onUpdated</span><span style="color:#797593">,</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>    <span style="color:#d7827e">onBeforeUnmount</span><span style="color:#797593">,</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>    <span style="color:#d7827e">onUnmounted</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>  <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>  <span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">sum</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">0</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">changeSum</span><span style="color:#797593">()</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>    <span style="color:#d7827e">sum</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>  <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;setup&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>  <span style="color:#9893a5">// 生命周期钩子
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">onBeforeMount</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;挂载之前&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>  <span style="color:#d7827e">onMounted</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;挂载完毕&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>  <span style="color:#d7827e">onBeforeUpdate</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;更新之前&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>  <span style="color:#d7827e">onUpdated</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;更新完毕&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span>  <span style="color:#d7827e">onBeforeUnmount</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;卸载之前&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span>  <span style="color:#d7827e">onUnmounted</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;卸载完毕&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h2 id="314-自定义hook">3.14. 【自定义hook】</h2>
<ul>
<li>
<p>什么是<code>hook</code>？—— 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，类似于<code>vue2.x</code>中的<code>mixin</code>。</p>
</li>
<li>
<p>自定义<code>hook</code>的优势：复用代码, 让<code>setup</code>中的逻辑更清楚易懂。</p>
</li>
</ul>
<p>示例代码：</p>
<ul>
<li>
<p><code>useSum.ts</code>中内容如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">ref</span><span style="color:#797593">,</span><span style="color:#d7827e">onMounted</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#286983">function</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">sum</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">0</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#286983">const</span> <span style="color:#d7827e">increment</span> <span style="color:#797593">=</span> <span style="color:#797593">()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#d7827e">sum</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#286983">const</span> <span style="color:#d7827e">decrement</span> <span style="color:#797593">=</span> <span style="color:#797593">()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#d7827e">sum</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">-=</span> <span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#d7827e">onMounted</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#d7827e">increment</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#9893a5">//向外部暴露数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">return</span> <span style="color:#797593">{</span><span style="color:#d7827e">sum</span><span style="color:#797593">,</span><span style="color:#d7827e">increment</span><span style="color:#797593">,</span><span style="color:#d7827e">decrement</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#797593">}</span>		
</span></span></code></pre></div></li>
<li>
<p><code>useDog.ts</code>中内容如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">reactive</span><span style="color:#797593">,</span><span style="color:#d7827e">onMounted</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">axios</span><span style="color:#797593">,{</span><span style="color:#d7827e">AxiosError</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;axios&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#286983">function</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">dogList</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">&lt;</span><span style="color:#d7827e">string</span><span style="color:#797593">[]</span><span style="color:#797593">&gt;</span><span style="color:#797593">([])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>  <span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">async</span> <span style="color:#286983">function</span> <span style="color:#d7827e">getDog</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#286983">try</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>      <span style="color:#9893a5">// 发请求
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#9893a5"></span>      <span style="color:#286983">let</span> <span style="color:#797593">{</span><span style="color:#d7827e">data</span><span style="color:#797593">}</span> <span style="color:#797593">=</span> <span style="color:#286983">await</span> <span style="color:#d7827e">axios</span><span style="color:#797593">.</span><span style="color:#d7827e">get</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;https://dog.ceo/api/breed/pembroke/images/random&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>      <span style="color:#9893a5">// 维护数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#9893a5"></span>      <span style="color:#d7827e">dogList</span><span style="color:#797593">.</span><span style="color:#d7827e">push</span><span style="color:#797593">(</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">message</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#797593">}</span> <span style="color:#286983">catch</span> <span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>      <span style="color:#9893a5">// 处理错误
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#9893a5"></span>      <span style="color:#286983">const</span> <span style="color:#d7827e">err</span> <span style="color:#797593">=</span> <span style="color:#797593">&lt;</span><span style="color:#d7827e">AxiosError</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">error</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">err</span><span style="color:#797593">.</span><span style="color:#d7827e">message</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>  <span style="color:#9893a5">// 挂载钩子
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">onMounted</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>    <span style="color:#d7827e">getDog</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>  <span style="color:#9893a5">//向外部暴露数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">return</span> <span style="color:#797593">{</span><span style="color:#d7827e">dogList</span><span style="color:#797593">,</span><span style="color:#d7827e">getDog</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#797593">}</span>
</span></span></code></pre></div></li>
<li>
<p>组件中具体使用：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">当前求和为</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">sum</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;increment&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我</span><span style="color:#b4637a">+</span><span style="color:#d7827e">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;decrement&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我</span><span style="color:#d7827e">-1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">hr</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">img</span> <span style="color:#d7827e">v-for</span><span style="color:#ea9d34">=&#34;(u,index) in dogList.urlList&#34; :key=&#34;index&#34; :src=&#34;(u as string)&#34;&gt; 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">  &lt;span v-show=&#34;dogList.isLoading&#34;&gt;加载中......&lt;/span&gt;&lt;br&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">  &lt;button @click=&#34;getDog&#34;&gt;再来一只狗&lt;/button&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">&lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#ea9d34">&lt;script lang=&#34;ts&#34;&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#ea9d34">  import {defineComponent} from &#39;vue&#39;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#ea9d34">  export default defineComponent({
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#ea9d34">    name:&#39;App&#39;,
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#ea9d34">  })
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#ea9d34">&lt;/script&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#ea9d34">&lt;script setup lang=&#34;ts&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>  <span style="color:#d7827e">import</span> <span style="color:#d7827e">useSum</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">.</span><span style="color:#b4637a">/</span><span style="color:#d7827e">hooks</span><span style="color:#b4637a">/</span><span style="color:#d7827e">useSum</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>  <span style="color:#d7827e">import</span> <span style="color:#d7827e">useDog</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">.</span><span style="color:#b4637a">/</span><span style="color:#d7827e">hooks</span><span style="color:#b4637a">/</span><span style="color:#d7827e">useDog</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>  <span style="color:#d7827e">let</span> <span style="color:#797593">{</span><span style="color:#d7827e">sum</span><span style="color:#b4637a">,</span><span style="color:#d7827e">increment</span><span style="color:#b4637a">,</span><span style="color:#d7827e">decrement</span><span style="color:#797593">}</span> <span style="color:#b4637a">=</span> <span style="color:#d7827e">useSum</span><span style="color:#b4637a">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>  <span style="color:#d7827e">let</span> <span style="color:#797593">{</span><span style="color:#d7827e">dogList</span><span style="color:#b4637a">,</span><span style="color:#d7827e">getDog</span><span style="color:#797593">}</span> <span style="color:#b4637a">=</span> <span style="color:#d7827e">useDog</span><span style="color:#b4637a">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
</ul>
<hr>
<h1 id="4-路由">4. 路由</h1>
<h2 id="41-对路由的理解">4.1. 【对路由的理解】</h2>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/image-20231018144351536-1713945796362.png">
<img src="/img/image-20231018144351536-1713945796362.png" alt="image-20231018144351536"  />
</a>
</div>

</p>
<h2 id="42-基本切换效果">4.2. 【基本切换效果】</h2>
<ul>
<li>
<p><code>Vue3</code>中要使用<code>vue-router</code>的最新版本，目前是<code>4</code>版本。</p>
</li>
<li>
<p>路由配置文件代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">createRouter</span><span style="color:#797593">,</span><span style="color:#d7827e">createWebHistory</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue-router&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">Home</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;@/pages/Home.vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">News</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;@/pages/News.vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">About</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;@/pages/About.vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">router</span> <span style="color:#797593">=</span> <span style="color:#d7827e">createRouter</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>	<span style="color:#d7827e">history</span><span style="color:#797593">:</span><span style="color:#d7827e">createWebHistory</span><span style="color:#797593">(),</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>	<span style="color:#d7827e">routes</span><span style="color:#797593">:</span><span style="color:#797593">[</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>		<span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>			<span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/home&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>			<span style="color:#d7827e">component</span><span style="color:#797593">:</span><span style="color:#d7827e">Home</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>		<span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>		<span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>			<span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/about&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>			<span style="color:#d7827e">component</span><span style="color:#797593">:</span><span style="color:#d7827e">About</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>		<span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>	<span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#d7827e">router</span>
</span></span></code></pre></div></li>
</ul>
<ul>
<li>
<p><code>main.ts</code>代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">router</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;./router/index&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#d7827e">app</span><span style="color:#797593">.</span><span style="color:#d7827e">use</span><span style="color:#797593">(</span><span style="color:#d7827e">router</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#d7827e">app</span><span style="color:#797593">.</span><span style="color:#d7827e">mount</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;#app&#39;</span><span style="color:#797593">)</span>
</span></span></code></pre></div></li>
</ul>
<ul>
<li>
<p><code>App.vue</code>代码如下</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;app&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;title&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">Vue路由测试</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">导航区</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;navigate&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterLink</span> <span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;/home&#34;</span> <span style="color:#d7827e">active</span><span style="color:#d7827e">-class</span><span style="color:#b4637a">=&#34;</span><span style="color:#d7827e">active</span><span style="color:#b4637a">&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">首页</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">RouterLink</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterLink</span> <span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;/news&#34;</span> <span style="color:#d7827e">active</span><span style="color:#d7827e">-class</span><span style="color:#b4637a">=&#34;</span><span style="color:#d7827e">active</span><span style="color:#b4637a">&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">新闻</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">RouterLink</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterLink</span> <span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;/about&#34;</span> <span style="color:#d7827e">active</span><span style="color:#d7827e">-class</span><span style="color:#b4637a">=&#34;</span><span style="color:#d7827e">active</span><span style="color:#b4637a">&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">关于</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">RouterLink</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">展示区</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;main-content&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterView</span><span style="color:#797593">&gt;&lt;/</span><span style="color:#d7827e">RouterView</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;App&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">RouterLink</span><span style="color:#797593">,</span><span style="color:#d7827e">RouterView</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue-router&#39;</span>  
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h2 id="43-两个注意点">4.3. 【两个注意点】</h2>
<blockquote>
<ol>
<li>
<p>路由组件通常存放在<code>pages</code> 或 <code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</p>
</li>
<li>
<p>通过点击导航，视觉效果上“消失” 了的路由组件，默认是被<strong>卸载</strong>掉的，需要的时候再去<strong>挂载</strong>。</p>
</li>
</ol>
</blockquote>
<h2 id="44路由器工作模式">4.4.【路由器工作模式】</h2>
<ol>
<li>
<p><code>history</code>模式</p>
<blockquote>
<p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。</p>
<p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<code>404</code>错误。</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">router</span> <span style="color:#797593">=</span> <span style="color:#d7827e">createRouter</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>	<span style="color:#d7827e">history</span><span style="color:#797593">:</span><span style="color:#d7827e">createWebHistory</span><span style="color:#797593">(),</span> <span style="color:#9893a5">//history模式
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#9893a5"></span>	<span style="color:#9893a5">/******/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div></blockquote>
</li>
<li>
<p><code>hash</code>模式</p>
<blockquote>
<p>优点：兼容性更好，因为不需要服务器端处理路径。</p>
<p>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">router</span> <span style="color:#797593">=</span> <span style="color:#d7827e">createRouter</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>	<span style="color:#d7827e">history</span><span style="color:#797593">:</span><span style="color:#d7827e">createWebHashHistory</span><span style="color:#797593">(),</span> <span style="color:#9893a5">//hash模式
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#9893a5"></span>	<span style="color:#9893a5">/******/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div></blockquote>
</li>
</ol>
<h2 id="45-to的两种写法">4.5. 【to的两种写法】</h2>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">第一种</span><span style="color:#b4637a">：</span><span style="color:#d7827e">to的字符串写法</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">router-link</span> <span style="color:#d7827e">active</span><span style="color:#d7827e">-class</span><span style="color:#b4637a">=&#34;</span><span style="color:#d7827e">active</span><span style="color:#b4637a">&#34;</span> <span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;/home&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">主页</span><span style="color:#797593">&lt;</span><span style="color:#b4637a">/router-link&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">第二种</span><span style="color:#b4637a">：</span><span style="color:#d7827e">to的对象写法</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">router-link</span> <span style="color:#d7827e">active</span><span style="color:#d7827e">-class</span><span style="color:#b4637a">=&#34;</span><span style="color:#d7827e">active</span><span style="color:#b4637a">&#34;</span> <span style="color:#d7827e">:to</span><span style="color:#ea9d34">=&#34;{path:&#39;/home&#39;}&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">Home</span><span style="color:#797593">&lt;</span><span style="color:#b4637a">/router-link&gt;</span>
</span></span></code></pre></div><h2 id="46-命名路由">4.6. 【命名路由】</h2>
<p>作用：可以简化路由跳转及传参（后面就讲）。</p>
<p>给路由规则命名：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#d7827e">routes</span><span style="color:#797593">:</span><span style="color:#797593">[</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;zhuye&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/home&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#d7827e">component</span><span style="color:#797593">:</span><span style="color:#d7827e">Home</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>  <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;xinwen&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/news&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#d7827e">component</span><span style="color:#797593">:</span><span style="color:#d7827e">News</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;guanyu&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/about&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>    <span style="color:#d7827e">component</span><span style="color:#797593">:</span><span style="color:#d7827e">About</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#797593">]</span>
</span></span></code></pre></div><p>跳转路由：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">&lt;!--</span><span style="color:#d7827e">简化前</span><span style="color:#b4637a">：</span><span style="color:#d7827e">需要写完整的路径</span><span style="color:#b4637a">（</span><span style="color:#d7827e">to的字符串写法</span><span style="color:#b4637a">）</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">router-link</span> <span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;/news/detail&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">跳转</span><span style="color:#797593">&lt;</span><span style="color:#b4637a">/router-link&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#9893a5">&lt;!--</span><span style="color:#d7827e">简化后</span><span style="color:#b4637a">：</span><span style="color:#d7827e">直接通过名字跳转</span><span style="color:#b4637a">（</span><span style="color:#d7827e">to的对象写法配合name属性</span><span style="color:#b4637a">）</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">router-link</span> <span style="color:#d7827e">:to</span><span style="color:#ea9d34">=&#34;{name:&#39;guanyu&#39;}&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">跳转</span><span style="color:#797593">&lt;</span><span style="color:#b4637a">/router-link&gt;</span>
</span></span></code></pre></div><h2 id="47-嵌套路由">4.7. 【嵌套路由】</h2>
<ol>
<li>
<p>编写<code>News</code>的子路由：<code>Detail.vue</code></p>
</li>
<li>
<p>配置路由规则，使用<code>children</code>配置项：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">router</span> <span style="color:#797593">=</span> <span style="color:#d7827e">createRouter</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#d7827e">history</span>:<span style="color:#286983">createWebHistory</span><span style="color:#797593">(),</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>	<span style="color:#d7827e">routes</span><span style="color:#797593">:</span><span style="color:#797593">[</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>		<span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>			<span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;zhuye&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>			<span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/home&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>			<span style="color:#d7827e">component</span>:<span style="color:#286983">Home</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>		<span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>		<span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>			<span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;xinwen&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>			<span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/news&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>			<span style="color:#d7827e">component</span>:<span style="color:#286983">News</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>			<span style="color:#d7827e">children</span><span style="color:#797593">:</span><span style="color:#797593">[</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>				<span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>					<span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;xiang&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>					<span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;detail&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>					<span style="color:#d7827e">component</span>:<span style="color:#286983">Detail</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>				<span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>			<span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>		<span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>		<span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>			<span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;guanyu&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>			<span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/about&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>			<span style="color:#d7827e">component</span>:<span style="color:#286983">About</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>		<span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>	<span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#d7827e">router</span>
</span></span></code></pre></div></li>
<li>
<p>跳转路由（记得要加完整路径）：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">router-link</span> <span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;/news/detail&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">xxxx</span><span style="color:#797593">&lt;</span><span style="color:#b4637a">/router-link&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">或</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">router-link</span> <span style="color:#d7827e">:to</span><span style="color:#ea9d34">=&#34;{path:&#39;/news/detail&#39;}&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">xxxx</span><span style="color:#797593">&lt;</span><span style="color:#b4637a">/router-link&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>记得去<code>Home</code>组件中预留一个<code>&lt;router-view&gt;</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;news&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">nav</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;news-list&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterLink</span> <span style="color:#d7827e">v-for</span><span style="color:#ea9d34">=&#34;news in newsList&#34; :key=&#34;news.id&#34; :to=&#34;{path:&#39;/news/detail&#39;}&#34;&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#ea9d34">        {{news.name}}
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#ea9d34">      &lt;/RouterLink&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">    &lt;/nav&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">    &lt;div class=&#34;news-detail&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterView</span><span style="color:#797593">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="48-路由传参">4.8. 【路由传参】</h2>
<h3 id="query参数">query参数</h3>
<ol>
<li>
<p>传递参数</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">跳转并携带query参数</span><span style="color:#b4637a">（</span><span style="color:#d7827e">to的字符串写法</span><span style="color:#b4637a">）</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">router-link</span> <span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;/news/detail?a=1&amp;b=2&amp;content=欢迎你&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>	<span style="color:#d7827e">跳转</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#797593">&lt;</span><span style="color:#b4637a">/router-link&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">跳转并携带query参数</span><span style="color:#b4637a">（</span><span style="color:#d7827e">to的对象写法</span><span style="color:#b4637a">）</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterLink</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#797593">:</span><span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;{
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">    //name:&#39;xiang&#39;, //用name也可以跳转
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#ea9d34">    path:&#39;/news/detail&#39;,
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#ea9d34">    query:{
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#ea9d34">      id:news.id,
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#ea9d34">      title:news.title,
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#ea9d34">      content:news.content
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#ea9d34">    }
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#ea9d34">  }&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>  <span style="color:#797593">{{</span><span style="color:#d7827e">news</span><span style="color:#797593">.</span><span style="color:#d7827e">title</span><span style="color:#797593">}}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">RouterLink</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>接收参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">useRoute</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue-router&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">route</span> <span style="color:#797593">=</span> <span style="color:#d7827e">useRoute</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#9893a5">// 打印query参数
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#9893a5"></span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">route</span><span style="color:#797593">.</span><span style="color:#d7827e">query</span><span style="color:#797593">)</span>
</span></span></code></pre></div></li>
</ol>
<h3 id="params参数">params参数</h3>
<ol>
<li>
<p>传递参数</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">跳转并携带params参数</span><span style="color:#b4637a">（</span><span style="color:#d7827e">to的字符串写法</span><span style="color:#b4637a">）</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterLink</span> <span style="color:#d7827e">:to</span><span style="color:#ea9d34">=&#34;`/news/detail/001/新闻001/内容001`&#34;</span><span style="color:#797593">&gt;{{</span><span style="color:#d7827e">news</span><span style="color:#797593">.</span><span style="color:#d7827e">title</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">RouterLink</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">跳转并携带params参数</span><span style="color:#b4637a">（</span><span style="color:#d7827e">to的对象写法</span><span style="color:#b4637a">）</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterLink</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#797593">:</span><span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;{
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">    name:&#39;xiang&#39;, //用name跳转
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">    params:{
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">      id:news.id,
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#ea9d34">      title:news.title,
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#ea9d34">      content:news.title
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#ea9d34">    }
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#ea9d34">  }&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>  <span style="color:#797593">{{</span><span style="color:#d7827e">news</span><span style="color:#797593">.</span><span style="color:#d7827e">title</span><span style="color:#797593">}}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">RouterLink</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>接收参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">useRoute</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue-router&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">route</span> <span style="color:#797593">=</span> <span style="color:#d7827e">useRoute</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#9893a5">// 打印params参数
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#9893a5"></span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">route</span><span style="color:#797593">.</span><span style="color:#d7827e">params</span><span style="color:#797593">)</span>
</span></span></code></pre></div></li>
</ol>
<blockquote>
<p>备注1：传递<code>params</code>参数时，若使用<code>to</code>的对象写法，必须使用<code>name</code>配置项，不能用<code>path</code>。</p>
<p>备注2：传递<code>params</code>参数时，需要提前在规则中占位。</p>
</blockquote>
<h2 id="49-路由的props配置">4.9. 【路由的props配置】</h2>
<p>作用：让路由组件更方便的收到参数（可以将路由参数作为<code>props</code>传给组件）</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>	<span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;xiang&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>	<span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;detail/:id/:title/:content&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>	<span style="color:#d7827e">component</span><span style="color:#797593">:</span><span style="color:#d7827e">Detail</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#9893a5">// props的对象写法，作用：把对象中的每一组key-value作为props传给Detail组件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5"></span>  <span style="color:#9893a5">// props:{a:1,b:2,c:3}, 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#9893a5"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#9893a5">// props的布尔值写法，作用：把收到了每一组params参数，作为props传给Detail组件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#9893a5"></span>  <span style="color:#9893a5">// props:true
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#9893a5"></span>  
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#9893a5">// props的函数写法，作用：把返回的对象中每一组key-value作为props传给Detail组件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">props</span><span style="color:#797593">(</span><span style="color:#d7827e">route</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#286983">return</span> <span style="color:#d7827e">route</span><span style="color:#797593">.</span><span style="color:#d7827e">query</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#797593">}</span>
</span></span></code></pre></div><h2 id="410--replace属性">4.10. 【 replace属性】</h2>
<ol>
<li>
<p>作用：控制路由跳转时操作浏览器历史记录的模式。</p>
</li>
<li>
<p>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>：</p>
<ul>
<li><code>push</code>是追加历史记录（默认值）。</li>
<li><code>replace</code>是替换当前记录。</li>
</ul>
</li>
<li>
<p>开启<code>replace</code>模式：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">RouterLink</span> <span style="color:#d7827e">replace</span> <span style="color:#d7827e">.......</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">News</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">RouterLink</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="411-编程式导航">4.11. 【编程式导航】</h2>
<p>路由组件的两个重要的属性：<code>$route</code>和<code>$router</code>变成了两个<code>hooks</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">useRoute</span><span style="color:#797593">,</span><span style="color:#d7827e">useRouter</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue-router&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">route</span> <span style="color:#797593">=</span> <span style="color:#d7827e">useRoute</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">router</span> <span style="color:#797593">=</span> <span style="color:#d7827e">useRouter</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">route</span><span style="color:#797593">.</span><span style="color:#d7827e">query</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">route</span><span style="color:#797593">.</span><span style="color:#d7827e">parmas</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">router</span><span style="color:#797593">.</span><span style="color:#d7827e">push</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">router</span><span style="color:#797593">.</span><span style="color:#d7827e">replace</span><span style="color:#797593">)</span>
</span></span></code></pre></div><h2 id="412-重定向">4.12. 【重定向】</h2>
<ol>
<li>
<p>作用：将特定的路径，重新定向到已有路由。</p>
</li>
<li>
<p>具体编码：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    <span style="color:#d7827e">path</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    <span style="color:#d7827e">redirect</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;/about&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#797593">}</span>
</span></span></code></pre></div></li>
</ol>
<h1 id="5-pinia">5. pinia</h1>
<h2 id="51准备一个效果">5.1【准备一个效果】</h2>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/pinia_example-1713945841891.gif">
<img src="/img/pinia_example-1713945841891.gif" alt="pinia_example"  />
</a>
</div>

</p>
<h2 id="52搭建-pinia-环境">5.2【搭建 pinia 环境】</h2>
<p>第一步：<code>npm install pinia</code></p>
<p>第二步：操作<code>src/main.ts</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">createApp</span> <span style="color:#797593">}</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">App</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#39;./App.vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">/* 引入createPinia，用于创建pinia */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">createPinia</span> <span style="color:#797593">}</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#39;pinia&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5">/* 创建pinia */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">pinia</span> <span style="color:#797593">=</span> <span style="color:#d7827e">createPinia</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">app</span> <span style="color:#797593">=</span> <span style="color:#d7827e">createApp</span><span style="color:#797593">(</span><span style="color:#d7827e">App</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#9893a5">/* 使用插件 */</span><span style="color:#797593">{}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#d7827e">app</span><span style="color:#797593">.</span><span style="color:#d7827e">use</span><span style="color:#797593">(</span><span style="color:#d7827e">pinia</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#d7827e">app</span><span style="color:#797593">.</span><span style="color:#d7827e">mount</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;#app&#39;</span><span style="color:#797593">)</span>
</span></span></code></pre></div><p>此时开发者工具中已经有了<code>pinia</code>选项</p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/900000112.png">
<img src="/img/900000112.png" alt="900000112"  />
</a>
</div>

</p>
<h2 id="53存储读取数据">5.3【存储+读取数据】</h2>
<ol>
<li>
<p><code>Store</code>是一个保存：<strong>状态</strong>、<strong>业务逻辑</strong> 的实体，每个组件都可以<strong>读取</strong>、<strong>写入</strong>它。</p>
</li>
<li>
<p>它有三个概念：<code>state</code>、<code>getter</code>、<code>action</code>，相当于组件中的： <code>data</code>、 <code>computed</code> 和 <code>methods</code>。</p>
</li>
<li>
<p>具体编码：<code>src/store/count.ts</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#9893a5">// 引入defineStore用于创建store
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#9893a5"></span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">defineStore</span><span style="color:#797593">}</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#39;pinia&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">// 定义并暴露一个store
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#9893a5"></span><span style="color:#286983">export</span> <span style="color:#286983">const</span> <span style="color:#d7827e">useCountStore</span> <span style="color:#797593">=</span> <span style="color:#d7827e">defineStore</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;count&#39;</span><span style="color:#797593">,{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#9893a5">// 动作
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">actions</span><span style="color:#797593">:</span><span style="color:#797593">{},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#9893a5">// 状态
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">state</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#286983">return</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>      <span style="color:#d7827e">sum</span>:<span style="color:#286983">6</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#9893a5">// 计算
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">getters</span><span style="color:#797593">:</span><span style="color:#797593">{}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div></li>
<li>
<p>具体编码：<code>src/store/talk.ts</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#9893a5">// 引入defineStore用于创建store
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#9893a5"></span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">defineStore</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;pinia&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">// 定义并暴露一个store
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#9893a5"></span><span style="color:#286983">export</span> <span style="color:#286983">const</span> <span style="color:#d7827e">useTalkStore</span> <span style="color:#797593">=</span> <span style="color:#d7827e">defineStore</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;talk&#39;</span><span style="color:#797593">,{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#9893a5">// 动作
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">actions</span><span style="color:#797593">:</span><span style="color:#797593">{},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#9893a5">// 状态
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">state</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#286983">return</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>      <span style="color:#d7827e">talkList</span><span style="color:#797593">:</span><span style="color:#797593">[</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>        <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;yuysada01&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">content</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;你今天有点怪，哪里怪？怪好看的！&#39;</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>     		<span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;yuysada02&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">content</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;草莓、蓝莓、蔓越莓，你想我了没？&#39;</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>        <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;yuysada03&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">content</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;心里给你留了一块地，我的死心塌地&#39;</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>      <span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>  <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>  <span style="color:#9893a5">// 计算
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">getters</span><span style="color:#797593">:</span><span style="color:#797593">{}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div></li>
<li>
<p>组件中使用<code>state</code>中的数据</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">当前求和为</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">sumStore</span><span style="color:#797593">.</span><span style="color:#d7827e">sum</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Count&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#9893a5">// 引入对应的useXxxxxStore	
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">useSumStore</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;@/store/sum&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#9893a5">// 调用useXxxxxStore得到对应的store
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">const</span> <span style="color:#d7827e">sumStore</span> <span style="color:#797593">=</span> <span style="color:#d7827e">useSumStore</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>	<span style="color:#797593">&lt;</span><span style="color:#d7827e">ul</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">li</span> <span style="color:#d7827e">v-for</span><span style="color:#ea9d34">=&#34;talk in talkStore.talkList&#34; :key=&#34;talk.id&#34;&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#ea9d34">      {{ talk.content }}
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#ea9d34">    &lt;/li&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#ea9d34">  &lt;/ul&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">&lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">&lt;script setup lang=&#34;ts&#34; name=&#34;Count&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>  <span style="color:#d7827e">import</span> <span style="color:#d7827e">axios</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">axios</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#d7827e">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">useTalkStore</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;@/</span><span style="color:#d7827e">store</span><span style="color:#b4637a">/</span><span style="color:#d7827e">talk</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#d7827e">const</span> <span style="color:#d7827e">talkStore </span><span style="color:#797593">=</span> <span style="color:#d7827e">useTalkStore</span><span style="color:#b4637a">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="54修改数据三种方式">5.4.【修改数据】(三种方式)</h2>
<ol>
<li>
<p>第一种修改方式，直接修改</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#d7827e">countStore</span><span style="color:#797593">.</span><span style="color:#d7827e">sum</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">666</span>
</span></span></code></pre></div></li>
<li>
<p>第二种修改方式：批量修改</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#d7827e">countStore</span><span style="color:#797593">.</span><span style="color:#d7827e">$patch</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>  <span style="color:#d7827e">sum</span>:<span style="color:#286983">999</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>  <span style="color:#d7827e">school</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;atguigu&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div></li>
<li>
<p>第三种修改方式：借助<code>action</code>修改（<code>action</code>中可以编写一些业务逻辑）</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">defineStore</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;pinia&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#286983">export</span> <span style="color:#286983">const</span> <span style="color:#d7827e">useCountStore</span> <span style="color:#797593">=</span> <span style="color:#d7827e">defineStore</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;count&#39;</span><span style="color:#797593">,</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>  <span style="color:#9893a5">/*************/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>  <span style="color:#d7827e">actions</span><span style="color:#797593">:</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#9893a5">//加
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">increment</span><span style="color:#797593">(</span><span style="color:#d7827e">value</span><span style="color:#797593">:</span><span style="color:#d7827e">number</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>      <span style="color:#286983">if</span> <span style="color:#797593">(</span><span style="color:#286983">this</span><span style="color:#797593">.</span><span style="color:#d7827e">sum</span> <span style="color:#797593">&lt;</span> <span style="color:#ea9d34">10</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>        <span style="color:#9893a5">//操作countStore中的sum
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#9893a5"></span>        <span style="color:#286983">this</span><span style="color:#797593">.</span><span style="color:#d7827e">sum</span> <span style="color:#797593">+=</span> <span style="color:#d7827e">value</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#9893a5">//减
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">decrement</span><span style="color:#797593">(</span><span style="color:#d7827e">value</span><span style="color:#797593">:</span><span style="color:#d7827e">number</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>      <span style="color:#286983">if</span><span style="color:#797593">(</span><span style="color:#286983">this</span><span style="color:#797593">.</span><span style="color:#d7827e">sum</span> <span style="color:#797593">&gt;</span> <span style="color:#ea9d34">1</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>        <span style="color:#286983">this</span><span style="color:#797593">.</span><span style="color:#d7827e">sum</span> <span style="color:#797593">-=</span> <span style="color:#d7827e">value</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>  <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>  <span style="color:#9893a5">/*************/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div></li>
<li>
<p>组件中调用<code>action</code>即可</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">// 使用countStore
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#9893a5"></span><span style="color:#286983">const</span> <span style="color:#d7827e">countStore</span> <span style="color:#797593">=</span> <span style="color:#d7827e">useCountStore</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#9893a5">// 调用对应action
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#9893a5"></span><span style="color:#d7827e">countStore</span><span style="color:#797593">.</span><span style="color:#d7827e">incrementOdd</span><span style="color:#797593">(</span><span style="color:#d7827e">n</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">)</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="55storetorefs">5.5.【storeToRefs】</h2>
<ul>
<li>借助<code>storeToRefs</code>将<code>store</code>中的数据转为<code>ref</code>对象，方便在模板中使用。</li>
<li>注意：<code>pinia</code>提供的<code>storeToRefs</code>只会将数据做转换，而<code>Vue</code>的<code>toRefs</code>会转换<code>store</code>中数据。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>	<span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;count&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">当前求和为</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span><span style="color:#d7827e">sum</span><span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>	<span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Count&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">useCountStore</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;@/store/count&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#9893a5">/* 引入storeToRefs */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">storeToRefs</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;pinia&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>	<span style="color:#9893a5">/* 得到countStore */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#286983">const</span> <span style="color:#d7827e">countStore</span> <span style="color:#797593">=</span> <span style="color:#d7827e">useCountStore</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#9893a5">/* 使用storeToRefs转换countStore，随后解构 */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>  <span style="color:#286983">const</span> <span style="color:#797593">{</span><span style="color:#d7827e">sum</span><span style="color:#797593">}</span> <span style="color:#797593">=</span> <span style="color:#d7827e">storeToRefs</span><span style="color:#797593">(</span><span style="color:#d7827e">countStore</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="56getters">5.6.【getters】</h2>
<ol>
<li>
<p>概念：当<code>state</code>中的数据，需要经过处理后再使用时，可以使用<code>getters</code>配置。</p>
</li>
<li>
<p>追加<code>getters</code>配置。</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#9893a5">// 引入defineStore用于创建store
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#9893a5"></span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">defineStore</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;pinia&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">// 定义并暴露一个store
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#9893a5"></span><span style="color:#286983">export</span> <span style="color:#286983">const</span> <span style="color:#d7827e">useCountStore</span> <span style="color:#797593">=</span> <span style="color:#d7827e">defineStore</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;count&#39;</span><span style="color:#797593">,{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#9893a5">// 动作
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">actions</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#9893a5">/************/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>  <span style="color:#9893a5">// 状态
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">state</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    <span style="color:#286983">return</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>      <span style="color:#d7827e">sum</span><span style="color:#797593">:</span><span style="color:#ea9d34">1</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>      <span style="color:#d7827e">school</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;atguigu&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>  <span style="color:#9893a5">// 计算
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">getters</span><span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    <span style="color:#d7827e">bigSum</span><span style="color:#797593">:</span><span style="color:#797593">(</span><span style="color:#d7827e">state</span><span style="color:#797593">)</span><span style="color:#797593">:</span><span style="color:#d7827e">number</span> <span style="color:#797593">=&gt;</span> <span style="color:#d7827e">state</span><span style="color:#797593">.</span><span style="color:#d7827e">sum</span> <span style="color:#797593">*</span><span style="color:#ea9d34">10</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    <span style="color:#d7827e">upperSchool</span><span style="color:#797593">()</span><span style="color:#797593">:</span><span style="color:#d7827e">string</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>      <span style="color:#286983">return</span> <span style="color:#286983">this</span><span style="color:#797593">.</span> <span style="color:#d7827e">school</span><span style="color:#797593">.</span><span style="color:#d7827e">toUpperCase</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div></li>
<li>
<p>组件中读取数据：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">const</span> <span style="color:#797593">{</span><span style="color:#d7827e">increment</span><span style="color:#797593">,</span><span style="color:#d7827e">decrement</span><span style="color:#797593">}</span> <span style="color:#797593">=</span> <span style="color:#d7827e">countStore</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#286983">let</span> <span style="color:#797593">{</span><span style="color:#d7827e">sum</span><span style="color:#797593">,</span><span style="color:#d7827e">school</span><span style="color:#797593">,</span><span style="color:#d7827e">bigSum</span><span style="color:#797593">,</span><span style="color:#d7827e">upperSchool</span><span style="color:#797593">}</span> <span style="color:#797593">=</span> <span style="color:#d7827e">storeToRefs</span><span style="color:#797593">(</span><span style="color:#d7827e">countStore</span><span style="color:#797593">)</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="57subscribe">5.7.【$subscribe】</h2>
<p>通过 store 的 <code>$subscribe()</code> 方法侦听 <code>state</code> 及其变化</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#d7827e">talkStore</span><span style="color:#797593">.</span><span style="color:#d7827e">$subscribe</span><span style="color:#797593">((</span><span style="color:#d7827e">mutate</span><span style="color:#797593">,</span><span style="color:#d7827e">state</span><span style="color:#797593">)</span><span style="color:#797593">=&gt;</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>  <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;LoveTalk&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">mutate</span><span style="color:#797593">,</span><span style="color:#d7827e">state</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>  <span style="color:#d7827e">localStorage</span><span style="color:#797593">.</span><span style="color:#d7827e">setItem</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;talk&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">JSON</span><span style="color:#797593">.</span><span style="color:#d7827e">stringify</span><span style="color:#797593">(</span><span style="color:#d7827e">talkList</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">))</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div><h2 id="58-store组合式写法">5.8. 【store组合式写法】</h2>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">defineStore</span><span style="color:#797593">}</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#39;pinia&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">axios</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#39;axios&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">nanoid</span><span style="color:#797593">}</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#39;nanoid&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">reactive</span><span style="color:#797593">}</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#286983">export</span> <span style="color:#286983">const</span> <span style="color:#d7827e">useTalkStore</span> <span style="color:#797593">=</span> <span style="color:#d7827e">defineStore</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;talk&#39;</span><span style="color:#797593">,()</span><span style="color:#797593">=&gt;</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>  <span style="color:#9893a5">// talkList就是state
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">const</span> <span style="color:#d7827e">talkList</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">(</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#d7827e">JSON</span><span style="color:#797593">.</span><span style="color:#d7827e">parse</span><span style="color:#797593">(</span><span style="color:#d7827e">localStorage</span><span style="color:#797593">.</span><span style="color:#d7827e">getItem</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;talkList&#39;</span><span style="color:#797593">)</span> <span style="color:#286983">as</span> <span style="color:#286983">string</span><span style="color:#797593">)</span> <span style="color:#797593">||</span> <span style="color:#797593">[]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>  <span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#9893a5">// getATalk函数相当于action
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">async</span> <span style="color:#286983">function</span> <span style="color:#d7827e">getATalk</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#9893a5">// 发请求，下面这行的写法是：连续解构赋值+重命名
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#9893a5"></span>    <span style="color:#286983">let</span> <span style="color:#797593">{</span><span style="color:#d7827e">data</span><span style="color:#797593">:</span><span style="color:#797593">{</span><span style="color:#d7827e">content</span>:<span style="color:#286983">title</span><span style="color:#797593">}}</span> <span style="color:#797593">=</span> <span style="color:#286983">await</span> <span style="color:#d7827e">axios</span><span style="color:#797593">.</span><span style="color:#286983">get</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;https://api.uomg.com/api/rand.qinghua?format=json&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>    <span style="color:#9893a5">// 把请求回来的字符串，包装成一个对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5"></span>    <span style="color:#286983">let</span> <span style="color:#d7827e">obj</span> <span style="color:#797593">=</span> <span style="color:#797593">{</span><span style="color:#d7827e">id</span>:<span style="color:#286983">nanoid</span><span style="color:#797593">(),</span><span style="color:#d7827e">title</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>    <span style="color:#9893a5">// 放到数组中
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">talkList</span><span style="color:#797593">.</span><span style="color:#d7827e">unshift</span><span style="color:#797593">(</span><span style="color:#d7827e">obj</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>  <span style="color:#286983">return</span> <span style="color:#797593">{</span><span style="color:#d7827e">talkList</span><span style="color:#797593">,</span><span style="color:#d7827e">getATalk</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div><h1 id="6-组件通信">6. 组件通信</h1>
<p><strong><code>Vue3</code>组件通信和<code>Vue2</code>的区别：</strong></p>
<ul>
<li>移出事件总线，使用<code>mitt</code>代替。</li>
</ul>
<ul>
<li><code>vuex</code>换成了<code>pinia</code>。</li>
<li>把<code>.sync</code>优化到了<code>v-model</code>里面了。</li>
<li>把<code>$listeners</code>所有的东西，合并到<code>$attrs</code>中了。</li>
<li><code>$children</code>被砍掉了。</li>
</ul>
<p><strong>常见搭配形式：</strong></p>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/image-20231119185900990-1713946112210.png">
<img src="/img/image-20231119185900990-1713946112210.png" alt="image-20231119185900990"  />
</a>
</div>

</p>
<h2 id="61-props">6.1. 【props】</h2>
<p>概述：<code>props</code>是使用频率最高的一种通信方式，常用与 ：<strong>父 ↔ 子</strong>。</p>
<ul>
<li>若 <strong>父传子</strong>：属性值是<strong>非函数</strong>。</li>
<li>若 <strong>子传父</strong>：属性值是<strong>函数</strong>。</li>
</ul>
<p>父组件：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;father&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">父组件</span><span style="color:#b4637a">，</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">我的车</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">car</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">儿子给的玩具</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">toy</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">Child</span> <span style="color:#d7827e">:car</span><span style="color:#ea9d34">=&#34;car&#34;</span> <span style="color:#d7827e">:getToy</span><span style="color:#ea9d34">=&#34;getToy&#34;</span><span style="color:#797593">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Father&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>	<span style="color:#286983">import</span> <span style="color:#d7827e">Child</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;./Child.vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>	<span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">ref</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#34;vue&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>	<span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#9893a5"></span>	<span style="color:#286983">const</span> <span style="color:#d7827e">car</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;奔驰&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>	<span style="color:#286983">const</span> <span style="color:#d7827e">toy</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>	<span style="color:#9893a5">// 方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5"></span>	<span style="color:#286983">function</span> <span style="color:#d7827e">getToy</span><span style="color:#797593">(</span><span style="color:#d7827e">value</span><span style="color:#797593">:</span><span style="color:#d7827e">string</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>		<span style="color:#d7827e">toy</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">=</span> <span style="color:#d7827e">value</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>	<span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><p>子组件</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;child&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">子组件</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">我的玩具</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">toy</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">父给我的车</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">car</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;getToy(toy)&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">玩具给父亲</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Child&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>	<span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">ref</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#34;vue&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>	<span style="color:#286983">const</span> <span style="color:#d7827e">toy</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;奥特曼&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>	
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>	<span style="color:#d7827e">defineProps</span><span style="color:#797593">([</span><span style="color:#ea9d34">&#39;car&#39;</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;getToy&#39;</span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="62-自定义事件">6.2. 【自定义事件】</h2>
<ol>
<li>概述：自定义事件常用于：<strong>子 =&gt; 父。</strong></li>
<li>注意区分好：原生事件、自定义事件。</li>
</ol>
<ul>
<li>原生事件：
<ul>
<li>事件名是特定的（<code>click</code>、<code>mosueenter</code>等等）</li>
<li>事件对象<code>$event</code>: 是包含事件相关信息的对象（<code>pageX</code>、<code>pageY</code>、<code>target</code>、<code>keyCode</code>）</li>
</ul>
</li>
<li>自定义事件：
<ul>
<li>事件名是任意名称</li>
<li><!-- raw HTML omitted -->事件对象<code>$event</code>: 是调用<code>emit</code>时所提供的数据，可以是任意类型！！！<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>
<ol start="3">
<li>
<p>示例：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">&lt;!--在父组件中，给子组件绑定自定义事件：--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">Child</span> <span style="color:#b4637a">@</span><span style="color:#d7827e">send-toy</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;toy = $event&#34;</span><span style="color:#797593">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#9893a5">&lt;!--注意区分原生事件与自定义事件中的$event--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#b4637a">@</span><span style="color:#d7827e">click</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;toy = $event&#34;</span><span style="color:#797593">&gt;</span>测试<span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">//子组件中，触发事件：
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#9893a5"></span><span style="color:#286983">this</span><span style="color:#797593">.</span><span style="color:#d7827e">$emit</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;send-toy&#39;</span><span style="color:#797593">,</span> <span style="color:#d7827e">具体数据</span><span style="color:#797593">)</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="63-mitt">6.3. 【mitt】</h2>
<p>概述：与消息订阅与发布（<code>pubsub</code>）功能类似，可以实现任意组件间通信。</p>
<p>安装<code>mitt</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>npm i mitt
</span></span></code></pre></div><p>新建文件：<code>src\utils\emitter.ts</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#9893a5">// 引入mitt 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#9893a5"></span><span style="color:#286983">import</span> <span style="color:#d7827e">mitt</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#34;mitt&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">// 创建emitter
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#9893a5"></span><span style="color:#286983">const</span> <span style="color:#d7827e">emitter</span> <span style="color:#797593">=</span> <span style="color:#d7827e">mitt</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5">/*
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#9893a5">  // 绑定事件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#9893a5">  emitter.on(&#39;abc&#39;,(value)=&gt;{
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#9893a5">    console.log(&#39;abc事件被触发&#39;,value)
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#9893a5">  })
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#9893a5">  emitter.on(&#39;xyz&#39;,(value)=&gt;{
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#9893a5">    console.log(&#39;xyz事件被触发&#39;,value)
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#9893a5">  })
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#9893a5">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#9893a5">  setInterval(() =&gt; {
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5">    // 触发事件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#9893a5">    emitter.emit(&#39;abc&#39;,666)
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#9893a5">    emitter.emit(&#39;xyz&#39;,777)
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#9893a5">  }, 1000);
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#9893a5">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#9893a5">  setTimeout(() =&gt; {
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#9893a5">    // 清理事件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#9893a5">    emitter.all.clear()
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#9893a5">  }, 3000); 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#9893a5">*/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#9893a5">// 创建并暴露mitt
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#9893a5"></span><span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#d7827e">emitter</span>
</span></span></code></pre></div><p>接收数据的组件中：绑定事件、同时在销毁前解绑事件：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">emitter</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#34;@/utils/emitter&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">onUnmounted</span> <span style="color:#797593">}</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#34;vue&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">// 绑定事件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#9893a5"></span><span style="color:#d7827e">emitter</span><span style="color:#797593">.</span><span style="color:#d7827e">on</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;send-toy&#39;</span><span style="color:#797593">,(</span><span style="color:#d7827e">value</span><span style="color:#797593">)</span><span style="color:#797593">=&gt;</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;send-toy事件被触发&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">value</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#d7827e">onUnmounted</span><span style="color:#797593">(()</span><span style="color:#797593">=&gt;</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>  <span style="color:#9893a5">// 解绑事件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">emitter</span><span style="color:#797593">.</span><span style="color:#d7827e">off</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;send-toy&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#797593">})</span>
</span></span></code></pre></div><p>【第三步】：提供数据的组件，在合适的时候触发事件</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">import</span> <span style="color:#d7827e">emitter</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#34;@/utils/emitter&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#286983">function</span> <span style="color:#d7827e">sendToy</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>  <span style="color:#9893a5">// 触发事件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">emitter</span><span style="color:#797593">.</span><span style="color:#d7827e">emit</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;send-toy&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">toy</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#797593">}</span>
</span></span></code></pre></div><p><strong>注意这个重要的内置关系，总线依赖着这个内置关系</strong></p>
<h2 id="64v-model">6.4.【v-model】</h2>
<ol>
<li>
<p>概述：实现 <strong>父↔子</strong> 之间相互通信。</p>
</li>
<li>
<p>前序知识 —— <code>v-model</code>的本质</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">使用v</span><span style="color:#797593">-</span><span style="color:#d7827e">model指令</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">input</span> <span style="color:#d7827e">type</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;text&#34;</span> <span style="color:#d7827e">v-model</span><span style="color:#ea9d34">=&#34;userName&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#b4637a">&lt;!--</span> <span style="color:#d7827e">v</span><span style="color:#d7827e">-model的本质是下面这行代码</span> <span style="color:#b4637a">--</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">input</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>  <span style="color:#d7827e">type</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;text&#34;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>  <span style="color:#d7827e">:value</span><span style="color:#ea9d34">=&#34;userName&#34;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>  <span style="color:#b4637a">@</span><span style="color:#d7827e">input</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;userName =(&lt;HTMLInputElement&gt;$event.target).value&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>组件标签上的<code>v-model</code>的本质：<code>:moldeValue</code> ＋ <code>update:modelValue</code>事件。</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">组件标签上使用v</span><span style="color:#797593">-</span><span style="color:#d7827e">model指令</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">AtguiguInput</span> <span style="color:#d7827e">v</span><span style="color:#d7827e">-model</span><span style="color:#b4637a">=&#34;</span><span style="color:#d7827e">userName</span><span style="color:#b4637a">&#34;</span><span style="color:#797593">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">组件标签上v</span><span style="color:#797593">-</span><span style="color:#d7827e">model的本质</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">AtguiguInput</span> <span style="color:#d7827e">:modelValue</span><span style="color:#ea9d34">=&#34;userName&#34;</span> <span style="color:#b4637a">@</span><span style="color:#d7827e">update</span><span style="color:#797593">:</span><span style="color:#d7827e">model</span><span style="color:#d7827e">-value</span><span style="color:#b4637a">=&#34;</span><span style="color:#d7827e">userName </span><span style="color:#797593">=</span> <span style="color:#b4637a">$</span><span style="color:#d7827e">event</span><span style="color:#b4637a">&#34;</span><span style="color:#797593">/&gt;</span>
</span></span></code></pre></div><p><code>AtguiguInput</code>组件中：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;box&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#9893a5">&lt;!--</span><span style="color:#d7827e">将接收的value值赋给input元素的value属性</span><span style="color:#b4637a">，</span><span style="color:#d7827e">目的是</span><span style="color:#b4637a">：</span><span style="color:#d7827e">为了呈现数据</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>		<span style="color:#9893a5">&lt;!--</span><span style="color:#d7827e">给input元素绑定原生input事件</span><span style="color:#b4637a">，</span><span style="color:#d7827e">触发input事件时</span><span style="color:#b4637a">，</span><span style="color:#d7827e">进而触发update</span><span style="color:#797593">:</span><span style="color:#d7827e">model</span><span style="color:#797593">-</span><span style="color:#d7827e">value事件</span><span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">input</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>       <span style="color:#d7827e">type</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;text&#34;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>       <span style="color:#d7827e">:value</span><span style="color:#ea9d34">=&#34;modelValue&#34;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>       <span style="color:#d7827e">@input</span><span style="color:#ea9d34">=&#34;emit(&#39;update:model-value&#39;,$event.target.value)&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;AtguiguInput&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#9893a5">// 接收props
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">defineProps</span><span style="color:#797593">([</span><span style="color:#ea9d34">&#39;modelValue&#39;</span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>  <span style="color:#9893a5">// 声明事件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">const</span> <span style="color:#d7827e">emit</span> <span style="color:#797593">=</span> <span style="color:#d7827e">defineEmits</span><span style="color:#797593">([</span><span style="color:#ea9d34">&#39;update:model-value&#39;</span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>也可以更换<code>value</code>，例如改成<code>abc</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">也可以更换value</span><span style="color:#b4637a">，</span><span style="color:#d7827e">例如改成abc</span><span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">AtguiguInput</span> <span style="color:#d7827e">v</span><span style="color:#d7827e">-model:abc</span><span style="color:#ea9d34">=&#34;userName&#34;</span><span style="color:#797593">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">上面代码的本质如下</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">AtguiguInput</span> <span style="color:#d7827e">:abc</span><span style="color:#ea9d34">=&#34;userName&#34;</span> <span style="color:#b4637a">@</span><span style="color:#d7827e">update</span><span style="color:#797593">:</span><span style="color:#d7827e">abc</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;userName = $event&#34;</span><span style="color:#797593">/&gt;</span>
</span></span></code></pre></div><p><code>AtguiguInput</code>组件中：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;box&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">input</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>       <span style="color:#d7827e">type</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;text&#34;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>       <span style="color:#d7827e">:value</span><span style="color:#ea9d34">=&#34;abc&#34;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>       <span style="color:#d7827e">@input</span><span style="color:#ea9d34">=&#34;emit(&#39;update:abc&#39;,$event.target.value)&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;AtguiguInput&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#9893a5">// 接收props
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">defineProps</span><span style="color:#797593">([</span><span style="color:#ea9d34">&#39;abc&#39;</span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#9893a5">// 声明事件
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">const</span> <span style="color:#d7827e">emit</span> <span style="color:#797593">=</span> <span style="color:#d7827e">defineEmits</span><span style="color:#797593">([</span><span style="color:#ea9d34">&#39;update:abc&#39;</span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>如果<code>value</code>可以更换，那么就可以在组件标签上多次使用<code>v-model</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">AtguiguInput</span> <span style="color:#d7827e">v</span><span style="color:#d7827e">-model:abc</span><span style="color:#ea9d34">=&#34;userName&#34;</span> <span style="color:#d7827e">v</span><span style="color:#d7827e">-model:xyz</span><span style="color:#ea9d34">=&#34;password&#34;</span><span style="color:#797593">/&gt;</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="65attrs-">6.5.【$attrs 】</h2>
<ol>
<li>
<p>概述：<code>$attrs</code>用于实现<strong>当前组件的父组件</strong>，向<strong>当前组件的子组件</strong>通信（<strong>祖→孙</strong>）。</p>
</li>
<li>
<p>具体说明：<code>$attrs</code>是一个对象，包含所有父组件传入的标签属性。</p>
<blockquote>
<p>注意：<code>$attrs</code>会自动排除<code>props</code>中声明的属性(可以认为声明过的 <code>props</code> 被子组件自己“消费”了)</p>
</blockquote>
</li>
</ol>
<p>父组件：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;father&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">父组件</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">Child</span> <span style="color:#d7827e">:a</span><span style="color:#ea9d34">=&#34;a&#34;</span> <span style="color:#d7827e">:b</span><span style="color:#ea9d34">=&#34;b&#34;</span> <span style="color:#d7827e">:c</span><span style="color:#ea9d34">=&#34;c&#34;</span> <span style="color:#d7827e">:d</span><span style="color:#ea9d34">=&#34;d&#34;</span> <span style="color:#d7827e">v-bind</span><span style="color:#ea9d34">=&#34;{x:100,y:200}&#34; :updateA=&#34;updateA&#34;/&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#ea9d34">  &lt;/div&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#ea9d34">&lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">&lt;script setup lang=&#34;ts&#34; name=&#34;Father&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>	<span style="color:#d7827e">import</span> <span style="color:#d7827e">Child</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">.</span><span style="color:#b4637a">/</span><span style="color:#d7827e">Child.vue</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>	<span style="color:#d7827e">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">ref</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#34;</span><span style="color:#d7827e">vue</span><span style="color:#b4637a">&#34;;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>	<span style="color:#d7827e">let</span> <span style="color:#d7827e">a </span><span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#b4637a">(</span><span style="color:#d7827e">1</span><span style="color:#b4637a">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>	<span style="color:#d7827e">let</span> <span style="color:#d7827e">b </span><span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#b4637a">(</span><span style="color:#d7827e">2</span><span style="color:#b4637a">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>	<span style="color:#d7827e">let</span> <span style="color:#d7827e">c </span><span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#b4637a">(</span><span style="color:#d7827e">3</span><span style="color:#b4637a">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>	<span style="color:#d7827e">let</span> <span style="color:#d7827e">d </span><span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#b4637a">(</span><span style="color:#d7827e">4</span><span style="color:#b4637a">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>	<span style="color:#d7827e">function</span> <span style="color:#d7827e">updateA</span><span style="color:#b4637a">(</span><span style="color:#d7827e">value</span><span style="color:#b4637a">)</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>		<span style="color:#d7827e">a.value</span> <span style="color:#b4637a">=</span> <span style="color:#d7827e">value</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>	<span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><p>子组件：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>	<span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;child&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">子组件</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">GrandChild</span> <span style="color:#d7827e">v-bind</span><span style="color:#ea9d34">=&#34;$attrs&#34;/&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#ea9d34">	&lt;/div&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#ea9d34">&lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">&lt;script setup lang=&#34;ts&#34; name=&#34;Child&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>	<span style="color:#d7827e">import</span> <span style="color:#d7827e">GrandChild</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">.</span><span style="color:#b4637a">/</span><span style="color:#d7827e">GrandChild.vue</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><p>孙组件：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>	<span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;grand-child&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">孙组件</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">a</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">a</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">b</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">b</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">c</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">c</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">d</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">d</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">x</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">x</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">y</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">y</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>		<span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;updateA(666)&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我更新A</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>	<span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;GrandChild&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>	<span style="color:#d7827e">defineProps</span><span style="color:#797593">([</span><span style="color:#ea9d34">&#39;a&#39;</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;b&#39;</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;c&#39;</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;d&#39;</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;x&#39;</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;y&#39;</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;updateA&#39;</span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="66-refsparent">6.6. 【$refs、$parent】</h2>
<ol>
<li>
<p>概述：</p>
<ul>
<li><code>$refs</code>用于 ：<strong>父→子。</strong></li>
<li><code>$parent</code>用于：<strong>子→父。</strong></li>
</ul>
</li>
<li>
<p>原理如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$refs</code></td>
<td>值为对象，包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例。</td>
</tr>
<tr>
<td><code>$parent</code></td>
<td>值为对象，当前组件的父组件实例对象。</td>
</tr>
</tbody>
</table>
</li>
</ol>
<h2 id="67-provideinject">6.7. 【provide、inject】</h2>
<ol>
<li>
<p>概述：实现<strong>祖孙组件</strong>直接通信</p>
</li>
<li>
<p>具体使用：</p>
<ul>
<li>在祖先组件中通过<code>provide</code>配置向后代组件提供数据</li>
<li>在后代组件中通过<code>inject</code>配置来声明接收数据</li>
</ul>
</li>
<li>
<p>具体编码：</p>
<p>【第一步】父组件中，使用<code>provide</code>提供数据</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;father&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">父组件</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">资产</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">money</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">汽车</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">car</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#b4637a">@</span><span style="color:#d7827e">click</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;money += 1&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">资产</span><span style="color:#797593">+</span><span style="color:#ea9d34">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#b4637a">@</span><span style="color:#d7827e">click</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;car.price += 1&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">汽车价格</span><span style="color:#797593">+</span><span style="color:#ea9d34">1</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">Child</span><span style="color:#797593">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;Father&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#286983">import</span> <span style="color:#d7827e">Child</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;./Child.vue&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">ref</span><span style="color:#797593">,</span><span style="color:#d7827e">reactive</span><span style="color:#797593">,</span><span style="color:#d7827e">provide</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#34;vue&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>  <span style="color:#9893a5">// 数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">let</span> <span style="color:#d7827e">money</span> <span style="color:#797593">=</span> <span style="color:#d7827e">ref</span><span style="color:#797593">(</span><span style="color:#ea9d34">100</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">car</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>    <span style="color:#d7827e">brand</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;奔驰&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    <span style="color:#d7827e">price</span><span style="color:#797593">:</span><span style="color:#ea9d34">100</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>  <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>  <span style="color:#9893a5">// 用于更新money的方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#9893a5"></span>  <span style="color:#286983">function</span> <span style="color:#d7827e">updateMoney</span><span style="color:#797593">(</span><span style="color:#d7827e">value</span><span style="color:#797593">:</span><span style="color:#d7827e">number</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>    <span style="color:#d7827e">money</span><span style="color:#797593">.</span><span style="color:#d7827e">value</span> <span style="color:#797593">+=</span> <span style="color:#d7827e">value</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>  <span style="color:#9893a5">// 提供数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#9893a5"></span>  <span style="color:#d7827e">provide</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;moneyContext&#39;</span><span style="color:#797593">,{</span><span style="color:#d7827e">money</span><span style="color:#797593">,</span><span style="color:#d7827e">updateMoney</span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>  <span style="color:#d7827e">provide</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;car&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">car</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><blockquote>
<p>注意：子组件中不用编写任何东西，是不受到任何打扰的</p>
</blockquote>
<p>【第二步】孙组件中使用<code>inject</code>配置项接受数据。</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;grand-child&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">我是孙组件</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">资产</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">money</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">汽车</span><span style="color:#b4637a">：</span><span style="color:#797593">{{</span> <span style="color:#d7827e">car</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h4</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#d7827e">@click</span><span style="color:#ea9d34">=&#34;updateMoney(6)&#34;</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">点我</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>  <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">script</span> <span style="color:#d7827e">setup</span> <span style="color:#d7827e">lang</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;ts&#34;</span> <span style="color:#d7827e">name</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;GrandChild&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">inject</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#39;vue&#39;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#9893a5">// 注入数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#9893a5"></span> <span style="color:#286983">let</span> <span style="color:#797593">{</span><span style="color:#d7827e">money</span><span style="color:#797593">,</span><span style="color:#d7827e">updateMoney</span><span style="color:#797593">}</span> <span style="color:#797593">=</span> <span style="color:#d7827e">inject</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;moneyContext&#39;</span><span style="color:#797593">,{</span><span style="color:#d7827e">money</span><span style="color:#797593">:</span><span style="color:#ea9d34">0</span><span style="color:#797593">,</span><span style="color:#d7827e">updateMoney</span><span style="color:#797593">:</span><span style="color:#797593">(</span><span style="color:#d7827e">x</span><span style="color:#797593">:</span><span style="color:#d7827e">number</span><span style="color:#797593">)=&gt;{}})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">car</span> <span style="color:#797593">=</span> <span style="color:#d7827e">inject</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;car&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="68-pinia">6.8. 【pinia】</h2>
<p>参考之前<code>pinia</code>部分的讲解</p>
<h2 id="69-slot">6.9. 【slot】</h2>
<h3 id="1-默认插槽">1. 默认插槽</h3>
<p>


<div class="post-img-view">
<a data-fancybox="gallery" href="/img/default_slot-1713946032262.png">
<img src="/img/default_slot-1713946032262.png" alt="default_slot"  />
</a>
</div>

</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#d7827e">父组件中</span><span style="color:#b4637a">：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>        <span style="color:#797593">&lt;</span><span style="color:#d7827e">Category</span> <span style="color:#d7827e">title</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;今日热门游戏&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>          <span style="color:#797593">&lt;</span><span style="color:#d7827e">ul</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>            <span style="color:#797593">&lt;</span><span style="color:#d7827e">li</span> <span style="color:#d7827e">v-for</span><span style="color:#ea9d34">=&#34;g in games&#34; :key=&#34;g.id&#34;&gt;{{ g.name }}&lt;/li&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#ea9d34">          &lt;/ul&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#ea9d34">        &lt;/Category&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">子组件中：
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">        &lt;template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">          &lt;div class=&#34;item&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>            <span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;{{</span> <span style="color:#d7827e">title</span> <span style="color:#797593">}}&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>            <span style="color:#9893a5">&lt;!--</span> <span style="color:#d7827e">默认插槽</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>            <span style="color:#797593">&lt;</span><span style="color:#d7827e">slot</span><span style="color:#797593">&gt;&lt;/</span><span style="color:#d7827e">slot</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>          <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>        <span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h3 id="2-具名插槽">2. 具名插槽</h3>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#d7827e">父组件中</span><span style="color:#b4637a">：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>        <span style="color:#797593">&lt;</span><span style="color:#d7827e">Category</span> <span style="color:#d7827e">title</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;今日热门游戏&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>          <span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span> <span style="color:#d7827e">v</span><span style="color:#d7827e">-slot</span><span style="color:#797593">:</span><span style="color:#d7827e">s1</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>            <span style="color:#797593">&lt;</span><span style="color:#d7827e">ul</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>              <span style="color:#797593">&lt;</span><span style="color:#d7827e">li</span> <span style="color:#d7827e">v-for</span><span style="color:#ea9d34">=&#34;g in games&#34; :key=&#34;g.id&#34;&gt;{{ g.name }}&lt;/li&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#ea9d34">            &lt;/ul&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">          &lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">          &lt;template #s2&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">            &lt;a href=&#34;&#34;&gt;更多&lt;/a&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#ea9d34">          &lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#ea9d34">        &lt;/Category&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#ea9d34">子组件中：
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#ea9d34">        &lt;template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#ea9d34">          &lt;div class=&#34;item&#34;&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#ea9d34">            &lt;h3&gt;{{ title }}&lt;/h3&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#ea9d34">            &lt;slot name=&#34;s1&#34;&gt;&lt;/slot&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#ea9d34">            &lt;slot name=&#34;s2&#34;</span><span style="color:#797593">&gt;&lt;/</span><span style="color:#d7827e">slot</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>          <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>        <span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h3 id="3-作用域插槽">3. 作用域插槽</h3>
<ol>
<li>
<p>理解：<!-- raw HTML omitted -->数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。<!-- raw HTML omitted -->（新闻数据在<code>News</code>组件中，但使用数据所遍历出来的结构由<code>App</code>组件决定）</p>
</li>
<li>
<p>具体编码：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#d7827e">父组件中</span><span style="color:#b4637a">：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">Game</span> <span style="color:#d7827e">v-slot</span><span style="color:#ea9d34">=&#34;params&#34;&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#ea9d34">      &lt;!-- &lt;Game v-slot</span><span style="color:#d7827e">:default</span><span style="color:#ea9d34">=&#34;params&#34;</span><span style="color:#797593">&gt;</span> <span style="color:#b4637a">--</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>      <span style="color:#9893a5">&lt;!--</span> <span style="color:#797593">&lt;</span><span style="color:#d7827e">Game</span> <span style="color:#b4637a">#</span><span style="color:#d7827e">default</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;params&#34;</span><span style="color:#797593">&gt;</span> <span style="color:#797593">--&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>        <span style="color:#797593">&lt;</span><span style="color:#d7827e">ul</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>          <span style="color:#797593">&lt;</span><span style="color:#d7827e">li</span> <span style="color:#d7827e">v-for</span><span style="color:#ea9d34">=&#34;g in params.games&#34; :key=&#34;g.id&#34;&gt;{{ g.name }}&lt;/li&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ea9d34">        &lt;/ul&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ea9d34">      &lt;/Game&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#ea9d34">子组件中：
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#ea9d34">      &lt;template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#ea9d34">        &lt;div class=&#34;category&#34;&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#ea9d34">          &lt;h2&gt;今日游戏榜单&lt;/h2&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#ea9d34">          &lt;slot :games=&#34;games&#34; a=&#34;哈哈&#34;&gt;&lt;/slot&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#ea9d34">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#ea9d34">      &lt;/template&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#ea9d34">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#ea9d34">      &lt;script setup lang=&#34;ts&#34; name=&#34;Category&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>        <span style="color:#d7827e">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">reactive</span><span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#b4637a">&#39;</span><span style="color:#d7827e">vue</span><span style="color:#b4637a">&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>        <span style="color:#d7827e">let</span> <span style="color:#d7827e">games </span><span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#b4637a">([</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>          <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#b4637a">&#39;</span><span style="color:#d7827e">asgdytsa01</span><span style="color:#b4637a">&#39;,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#b4637a">&#39;</span><span style="color:#d7827e">英雄联盟</span><span style="color:#b4637a">&#39;</span><span style="color:#797593">}</span><span style="color:#b4637a">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>          <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#b4637a">&#39;</span><span style="color:#d7827e">asgdytsa02</span><span style="color:#b4637a">&#39;,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#b4637a">&#39;</span><span style="color:#d7827e">王者荣耀</span><span style="color:#b4637a">&#39;</span><span style="color:#797593">}</span><span style="color:#b4637a">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>          <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#b4637a">&#39;</span><span style="color:#d7827e">asgdytsa03</span><span style="color:#b4637a">&#39;,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#b4637a">&#39;</span><span style="color:#d7827e">红色警戒</span><span style="color:#b4637a">&#39;</span><span style="color:#797593">}</span><span style="color:#b4637a">,</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>          <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#b4637a">&#39;</span><span style="color:#d7827e">asgdytsa04</span><span style="color:#b4637a">&#39;,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#b4637a">&#39;</span><span style="color:#d7827e">斗罗大陆</span><span style="color:#b4637a">&#39;</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>        <span style="color:#b4637a">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>      <span style="color:#797593">&lt;/</span><span style="color:#d7827e">script</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div></li>
</ol>
<h1 id="7-其它-api">7. 其它 API</h1>
<h2 id="71shallowref-与-shallowreactive-">7.1.【shallowRef 与 shallowReactive 】</h2>
<h3 id="shallowref"><code>shallowRef</code></h3>
<ol>
<li>
<p>作用：创建一个响应式数据，但只对顶层属性进行响应式处理。</p>
</li>
<li>
<p>用法：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">let</span> <span style="color:#d7827e">myVar</span> <span style="color:#797593">=</span> <span style="color:#d7827e">shallowRef</span><span style="color:#797593">(</span><span style="color:#d7827e">initialValue</span><span style="color:#797593">);</span>
</span></span></code></pre></div></li>
<li>
<p>特点：只跟踪引用值的变化，不关心值内部的属性变化。</p>
</li>
</ol>
<h3 id="shallowreactive"><code>shallowReactive</code></h3>
<ol>
<li>
<p>作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的</p>
</li>
<li>
<p>用法：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">myObj</span> <span style="color:#797593">=</span> <span style="color:#d7827e">shallowReactive</span><span style="color:#797593">({</span> <span style="color:#797593">...</span> <span style="color:#797593">});</span>
</span></span></code></pre></div></li>
<li>
<p>特点：对象的顶层属性是响应式的，但嵌套对象的属性不是。</p>
</li>
</ol>
<h3 id="总结">总结</h3>
<blockquote>
<p>通过使用 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> 和 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> 来绕开深度响应。浅层式 <code>API</code> 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。</p>
</blockquote>
<h2 id="72readonly-与-shallowreadonly">7.2.【readonly 与 shallowReadonly】</h2>
<h3 id="readonly"><strong><code>readonly</code></strong></h3>
<ol>
<li>
<p>作用：用于创建一个对象的深只读副本。</p>
</li>
<li>
<p>用法：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">original</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">({</span> <span style="color:#797593">...</span> <span style="color:#797593">});</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">readOnlyCopy</span> <span style="color:#797593">=</span> <span style="color:#d7827e">readonly</span><span style="color:#797593">(</span><span style="color:#d7827e">original</span><span style="color:#797593">);</span>
</span></span></code></pre></div></li>
<li>
<p>特点：</p>
<ul>
<li>对象的所有嵌套属性都将变为只读。</li>
<li>任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。</li>
</ul>
</li>
<li>
<p>应用场景：</p>
<ul>
<li>创建不可变的状态快照。</li>
<li>保护全局状态或配置不被修改。</li>
</ul>
</li>
</ol>
<h3 id="shallowreadonly"><strong><code>shallowReadonly</code></strong></h3>
<ol>
<li>
<p>作用：与 <code>readonly</code> 类似，但只作用于对象的顶层属性。</p>
</li>
<li>
<p>用法：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">original</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">({</span> <span style="color:#797593">...</span> <span style="color:#797593">});</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">shallowReadOnlyCopy</span> <span style="color:#797593">=</span> <span style="color:#d7827e">shallowReadonly</span><span style="color:#797593">(</span><span style="color:#d7827e">original</span><span style="color:#797593">);</span>
</span></span></code></pre></div></li>
<li>
<p>特点：</p>
<ul>
<li>
<p>只将对象的顶层属性设置为只读，对象内部的嵌套属性仍然是可变的。</p>
</li>
<li>
<p>适用于只需保护对象顶层属性的场景。</p>
</li>
</ul>
</li>
</ol>
<h2 id="73toraw-与-markraw">7.3.【toRaw 与 markRaw】</h2>
<h3 id="toraw"><code>toRaw</code></h3>
<ol>
<li>
<p>作用：用于获取一个响应式对象的原始对象， <code>toRaw</code> 返回的对象不再是响应式的，不会触发视图更新。</p>
<blockquote>
<p>官网描述：这是一个可以用于临时读取而不引起代理访问/跟踪开销，或是写入而不触发更改的特殊方法。不建议保存对原始对象的持久引用，请谨慎使用。</p>
</blockquote>
<blockquote>
<p>何时使用？ —— 在需要将响应式对象传递给非 <code>Vue</code> 的库或外部系统时，使用 <code>toRaw</code> 可以确保它们收到的是普通对象</p>
</blockquote>
</li>
<li>
<p>具体编码：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">,</span><span style="color:#d7827e">toRaw</span><span style="color:#797593">,</span><span style="color:#d7827e">markRaw</span><span style="color:#797593">,</span><span style="color:#d7827e">isReactive</span> <span style="color:#797593">}</span> <span style="color:#d7827e">from</span> <span style="color:#ea9d34">&#34;vue&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#9893a5">/* toRaw */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#9893a5">// 响应式对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#9893a5"></span><span style="color:#286983">let</span> <span style="color:#d7827e">person</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">({</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;tony&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">age</span><span style="color:#797593">:</span><span style="color:#ea9d34">18</span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#9893a5">// 原始对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#9893a5"></span><span style="color:#286983">let</span> <span style="color:#d7827e">rawPerson</span> <span style="color:#797593">=</span> <span style="color:#d7827e">toRaw</span><span style="color:#797593">(</span><span style="color:#d7827e">person</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#9893a5">/* markRaw */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#286983">let</span> <span style="color:#d7827e">citysd</span> <span style="color:#797593">=</span> <span style="color:#d7827e">markRaw</span><span style="color:#797593">([</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;asdda01&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;北京&#39;</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>  <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;asdda02&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;上海&#39;</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;asdda03&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;天津&#39;</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>  <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;asdda04&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;重庆&#39;</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#9893a5">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#9893a5"></span><span style="color:#286983">let</span> <span style="color:#d7827e">citys2</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">(</span><span style="color:#d7827e">citys</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">isReactive</span><span style="color:#797593">(</span><span style="color:#d7827e">person</span><span style="color:#797593">))</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">isReactive</span><span style="color:#797593">(</span><span style="color:#d7827e">rawPerson</span><span style="color:#797593">))</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">isReactive</span><span style="color:#797593">(</span><span style="color:#d7827e">citys</span><span style="color:#797593">))</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">isReactive</span><span style="color:#797593">(</span><span style="color:#d7827e">citys2</span><span style="color:#797593">))</span>
</span></span></code></pre></div></li>
</ol>
<h3 id="markraw"><code>markRaw</code></h3>
<ol>
<li>
<p>作用：标记一个对象，使其<strong>永远不会</strong>变成响应式的。</p>
<blockquote>
<p>例如使用<code>mockjs</code>时，为了防止误把<code>mockjs</code>变为响应式对象，可以使用 <code>markRaw</code> 去标记<code>mockjs</code></p>
</blockquote>
</li>
<li>
<p>编码：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#9893a5">/* markRaw */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#286983">let</span> <span style="color:#d7827e">citys</span> <span style="color:#797593">=</span> <span style="color:#d7827e">markRaw</span><span style="color:#797593">([</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>  <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;asdda01&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;北京&#39;</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>  <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;asdda02&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;上海&#39;</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>  <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;asdda03&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;天津&#39;</span><span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>  <span style="color:#797593">{</span><span style="color:#d7827e">id</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;asdda04&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">name</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;重庆&#39;</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="color:#9893a5">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span><span style="color:#9893a5"></span><span style="color:#286983">let</span> <span style="color:#d7827e">citys2</span> <span style="color:#797593">=</span> <span style="color:#d7827e">reactive</span><span style="color:#797593">(</span><span style="color:#d7827e">citys</span><span style="color:#797593">)</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="74customref">7.4.【customRef】</h2>
<p>作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发进行逻辑控制。</p>
<p>实现防抖效果（<code>useSumRef.ts</code>）：</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span><span style="color:#d7827e">customRef</span> <span style="color:#797593">}</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#34;vue&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#286983">export</span> <span style="color:#286983">default</span> <span style="color:#286983">function</span><span style="color:#797593">(</span><span style="color:#d7827e">initValue</span>:<span style="color:#286983">string</span><span style="color:#797593">,</span><span style="color:#d7827e">delay</span>:<span style="color:#286983">number</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>  <span style="color:#286983">let</span> <span style="color:#d7827e">msg</span> <span style="color:#797593">=</span> <span style="color:#d7827e">customRef</span><span style="color:#797593">((</span><span style="color:#d7827e">track</span><span style="color:#797593">,</span><span style="color:#d7827e">trigger</span><span style="color:#797593">)</span><span style="color:#797593">=&gt;</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#286983">let</span> <span style="color:#d7827e">timer</span>:<span style="color:#286983">number</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#286983">return</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>      <span style="color:#286983">get</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>        <span style="color:#d7827e">track</span><span style="color:#797593">()</span> <span style="color:#9893a5">// 告诉Vue数据msg很重要，要对msg持续关注，一旦变化就更新
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#9893a5"></span>        <span style="color:#286983">return</span> <span style="color:#d7827e">initValue</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>      <span style="color:#797593">},</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>      <span style="color:#286983">set</span><span style="color:#797593">(</span><span style="color:#d7827e">value</span><span style="color:#797593">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>        <span style="color:#d7827e">clearTimeout</span><span style="color:#797593">(</span><span style="color:#d7827e">timer</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>        <span style="color:#d7827e">timer</span> <span style="color:#797593">=</span> <span style="color:#d7827e">setTimeout</span><span style="color:#797593">(()</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>          <span style="color:#d7827e">initValue</span> <span style="color:#797593">=</span> <span style="color:#d7827e">value</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>          <span style="color:#d7827e">trigger</span><span style="color:#797593">()</span> <span style="color:#9893a5">//通知Vue数据msg变化了
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#9893a5"></span>        <span style="color:#797593">},</span> <span style="color:#d7827e">delay</span><span style="color:#797593">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>  <span style="color:#797593">})</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>  <span style="color:#286983">return</span> <span style="color:#797593">{</span><span style="color:#d7827e">msg</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#797593">}</span>
</span></span></code></pre></div><p>组件中使用：</p>
<h1 id="8-vue3新组件">8. Vue3新组件</h1>
<h2 id="81-teleport">8.1. 【Teleport】</h2>
<ul>
<li>什么是Teleport？—— Teleport 是一种能够将我们的<strong>组件html结构</strong>移动到指定位置的技术。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">teleport</span> <span style="color:#d7827e">to</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#39;body&#39;</span> <span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;modal&#34;</span> <span style="color:#d7827e">v-show</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;isShow&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>我是一个弹窗<span style="color:#797593">&lt;/</span><span style="color:#d7827e">h2</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">p</span><span style="color:#797593">&gt;</span>我是弹窗中的一些内容<span style="color:#797593">&lt;/</span><span style="color:#d7827e">p</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>      <span style="color:#797593">&lt;</span><span style="color:#d7827e">button</span> <span style="color:#b4637a">@</span><span style="color:#d7827e">click</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;isShow = false&#34;</span><span style="color:#797593">&gt;</span>关闭弹窗<span style="color:#797593">&lt;/</span><span style="color:#d7827e">button</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>    <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">teleport</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="82-suspense">8.2. 【Suspense】</h2>
<ul>
<li>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</li>
<li>使用步骤：
<ul>
<li>异步引入组件</li>
<li>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#286983">import</span> <span style="color:#797593">{</span> <span style="color:#d7827e">defineAsyncComponent</span><span style="color:#797593">,</span><span style="color:#d7827e">Suspense</span> <span style="color:#797593">}</span> <span style="color:#286983">from</span> <span style="color:#ea9d34">&#34;vue&#34;</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#286983">const</span> <span style="color:#d7827e">Child</span> <span style="color:#797593">=</span> <span style="color:#d7827e">defineAsyncComponent</span><span style="color:#797593">(()</span><span style="color:#797593">=&gt;</span><span style="color:#286983">import</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;./Child.vue&#39;</span><span style="color:#797593">))</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-vue" data-lang="vue"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>    <span style="color:#797593">&lt;</span><span style="color:#d7827e">div</span> <span style="color:#d7827e">class</span><span style="color:#797593">=</span><span style="color:#ea9d34">&#34;app&#34;</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>        <span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">我是App组件</span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        <span style="color:#797593">&lt;</span><span style="color:#d7827e">Suspense</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>          <span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span> <span style="color:#d7827e">v</span><span style="color:#d7827e">-slot</span><span style="color:#797593">:</span><span style="color:#d7827e">default</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>            <span style="color:#797593">&lt;</span><span style="color:#d7827e">Child</span><span style="color:#797593">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>          <span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>          <span style="color:#797593">&lt;</span><span style="color:#d7827e">template</span> <span style="color:#d7827e">v</span><span style="color:#d7827e">-slot</span><span style="color:#797593">:</span><span style="color:#d7827e">fallback</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>            <span style="color:#797593">&lt;</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span><span style="color:#d7827e">加载中</span><span style="color:#797593">.......&lt;/</span><span style="color:#d7827e">h3</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>          <span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>        <span style="color:#797593">&lt;/</span><span style="color:#d7827e">Suspense</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    <span style="color:#797593">&lt;/</span><span style="color:#d7827e">div</span><span style="color:#797593">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#797593">&lt;/</span><span style="color:#d7827e">template</span><span style="color:#797593">&gt;</span>
</span></span></code></pre></div><h2 id="83全局api转移到应用对象">8.3.【全局API转移到应用对象】</h2>
<ul>
<li><code>app.component</code></li>
<li><code>app.config</code></li>
<li><code>app.directive</code></li>
<li><code>app.mount</code></li>
<li><code>app.unmount</code></li>
<li><code>app.use</code></li>
</ul>
<h2 id="84其他">8.4.【其他】</h2>
<ul>
<li>
<p>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code>、过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code>。</p>
</li>
<li>
<p><code>keyCode</code> 作为 <code>v-on</code> 修饰符的支持。</p>
</li>
<li>
<p><code>v-model</code> 指令在组件上的使用已经被重新设计，替换掉了 <code>v-bind.sync。</code></p>
</li>
<li>
<p><code>v-if</code> 和 <code>v-for</code> 在同一个元素身上使用时的优先级发生了变化。</p>
</li>
<li>
<p>移除了<code>$on</code>、<code>$off</code> 和 <code>$once</code> 实例方法。</p>
</li>
<li>
<p>移除了过滤器 <code>filter</code>。</p>
</li>
<li>
<p>移除了<code>$children</code> 实例 <code>propert</code>。</p>
<p>&hellip;&hellip;</p>
</li>
</ul>


                    
                    
<div class="entry-shang text-center">
    
	    <p></p>
	
	<button class="zs show-zs btn btn-bred">赞赏支持</button>
</div>
<div class="zs-modal-bg"></div>
<div class="zs-modal-box">
	<div class="zs-modal-head">
		<button type="button" class="close">x</button>
		
		<span class="author"><img src="/img/favicon.png" class="favicon"/></a></span>
        
		

		
 
	</div>
	<div class="zs-modal-body">
		<label class="left-btn"><img src="/img/reward/wechat-btn.png" /></label>
		<label class="right-btn"><img src="/img/reward/alipay-btn.png" /></label>
	</div>

	<div class="zs-modal-footer">
		<label class="left-png"><img src="/img/reward/wechat-1.png"/></label>
		<label class="right-png"><img src="/img/reward/alipay-1.png"/></label>

	</div>
</div>
<script type="text/javascript" src="/js/reward.js"></script>

                    
        
                    
                    
                    <hr>
                    <ul class="pager">
                        
                        <li class="previous">
                            <a href="/post/%E4%B8%87%E5%8E%86%E5%8D%81%E4%BA%94%E5%B9%B4%E6%91%98%E8%A6%81/" data-toggle="tooltip" data-placement="top"
                                title="《万历十五年》摘要">&larr;
                                Previous Post</a>
                        </li>
                        
                        
                        <li class="next">
                            <a href="/post/github%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93%E5%B9%B6%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%A0%81/" data-toggle="tooltip" data-placement="top"
                                title="Github新建仓库并添加本地代码或文件">Next
                                Post &rarr;</a>
                        </li>
                        
                    </ul>
                    

                    


<script src="https://giscus.app/client.js"
        data-repo="HuuuuuuO/huuuuuuo.github.io"
        data-repo-id="R_kgDOLi2R7w"
        data-category="Announcements"
        data-category-id="DIC_kwDOLi2R784CeJvK"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="noborder_light"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>


                </div>

                
                


                
                <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                
                    <div class="side-catalog">
                        <hr class="hidden-sm hidden-xs">
                        
                        
                         
                            <h4>
                                <a class="catalog-toggle" href="#">目录</a>
                            </h4>
                        
                        <ul class="catalog-body"></ul>
                    </div>
                </div>
                

                
                <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                    
                    
                    <section>
                        <hr class="hidden-sm hidden-xs">
                        <h5><a href="/tags/">FEATURED TAGS</a></h5>
                        <div class="tags">
                            
                            
                            
                            <a href="/tags/ai" title="ai">
                                ai
                            </a>
                            
                            
                            
                            <a href="/tags/a%E8%AE%B0%E5%BD%95" title="a记录">
                                a记录
                            </a>
                            
                            
                            
                            <a href="/tags/branch" title="branch">
                                branch
                            </a>
                            
                            
                            
                            <a href="/tags/b%E7%AB%99" title="b站">
                                b站
                            </a>
                            
                            
                            
                            <a href="/tags/chroma-style-gallery" title="chroma style gallery">
                                chroma style gallery
                            </a>
                            
                            
                            
                            <a href="/tags/cname" title="cname">
                                cname
                            </a>
                            
                            
                            
                            <a href="/tags/copy" title="copy">
                                copy
                            </a>
                            
                            
                            
                            <a href="/tags/dns" title="dns">
                                dns
                            </a>
                            
                            
                            
                            <a href="/tags/drawio" title="drawio">
                                drawio
                            </a>
                            
                            
                            
                            <a href="/tags/fancybox" title="fancybox">
                                fancybox
                            </a>
                            
                            
                            
                            <a href="/tags/fuse" title="fuse">
                                fuse
                            </a>
                            
                            
                            
                            <a href="/tags/giscus" title="giscus">
                                giscus
                            </a>
                            
                            
                            
                            <a href="/tags/git" title="git">
                                git
                            </a>
                            
                            
                            
                            <a href="/tags/git-bug" title="git bug">
                                git bug
                            </a>
                            
                            
                            
                            <a href="/tags/github" title="github">
                                github
                            </a>
                            
                            
                            
                            <a href="/tags/githubpages" title="githubpages">
                                githubpages
                            </a>
                            
                            
                            
                            <a href="/tags/gitignore" title="gitignore">
                                gitignore
                            </a>
                            
                            
                            
                            <a href="/tags/gpt" title="gpt">
                                gpt
                            </a>
                            
                            
                            
                            <a href="/tags/html" title="html">
                                html
                            </a>
                            
                            
                            
                            <a href="/tags/hugo" title="hugo">
                                hugo
                            </a>
                            
                            
                            
                            <a href="/tags/jmeter" title="jmeter">
                                jmeter
                            </a>
                            
                            
                            
                            <a href="/tags/knn" title="knn">
                                knn
                            </a>
                            
                            
                            
                            <a href="/tags/lastmod" title="lastmod">
                                lastmod
                            </a>
                            
                            
                            
                            <a href="/tags/mark" title="mark">
                                mark
                            </a>
                            
                            
                            
                            <a href="/tags/mermaid" title="mermaid">
                                mermaid
                            </a>
                            
                            
                            
                            <a href="/tags/pages" title="pages">
                                pages
                            </a>
                            
                            
                            
                            <a href="/tags/python" title="python">
                                python
                            </a>
                            
                            
                            
                            <a href="/tags/reset" title="reset">
                                reset
                            </a>
                            
                            
                            
                            <a href="/tags/shortcodes" title="shortcodes">
                                shortcodes
                            </a>
                            
                            
                            
                            <a href="/tags/sqlite" title="sqlite">
                                sqlite
                            </a>
                            
                            
                            
                            <a href="/tags/ssh" title="ssh">
                                ssh
                            </a>
                            
                            
                            
                            <a href="/tags/svm" title="svm">
                                svm
                            </a>
                            
                            
                            
                            <a href="/tags/typora" title="typora">
                                typora
                            </a>
                            
                            
                            
                            <a href="/tags/vue3" title="vue3">
                                vue3
                            </a>
                            
                            
                            
                            <a href="/tags/windows" title="windows">
                                windows
                            </a>
                            
                            
                            
                            <a href="/tags/%E4%B8%87%E5%8E%86%E5%8D%81%E4%BA%94%E5%B9%B4" title="万历十五年">
                                万历十五年
                            </a>
                            
                            
                            
                            <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD" title="人工智能">
                                人工智能
                            </a>
                            
                            
                            
                            <a href="/tags/%E4%BB%A3%E7%A0%81%E5%9D%97" title="代码块">
                                代码块
                            </a>
                            
                            
                            
                            <a href="/tags/%E4%BB%A3%E7%A0%81%E6%BC%8F%E6%B4%9E" title="代码漏洞">
                                代码漏洞
                            </a>
                            
                            
                            
                            <a href="/tags/%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE" title="代码高亮">
                                代码高亮
                            </a>
                            
                            
                            
                            <a href="/tags/%E4%BC%98%E5%8C%96" title="优化">
                                优化
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%86%B7%E7%AC%91%E8%AF%9D" title="冷笑话">
                                冷笑话
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%88%86%E6%94%AF" title="分支">
                                分支
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%88%98%E6%85%88%E6%AC%A3" title="刘慈欣">
                                刘慈欣
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA" title="博客搭建">
                                博客搭建
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%8D%9A%E5%AE%A2%E6%94%B9%E9%80%A0" title="博客改造">
                                博客改造
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%9B%BE%E7%89%87%E6%94%BE%E5%A4%A7" title="图片放大">
                                图片放大
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%9F%9F%E5%90%8D" title="域名">
                                域名
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%A2%9E%E5%8A%A0%E6%96%B0%E9%A1%B5%E9%9D%A2" title="增加新页面">
                                增加新页面
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B" title="大模型">
                                大模型
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5" title="天气预报">
                                天气预报
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%AD%97%E4%BD%93" title="字体">
                                字体
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%AD%97%E6%95%B0%E7%BB%9F%E8%AE%A1" title="字数统计">
                                字数统计
                            </a>
                            
                            
                            
                            <a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE" title="快捷键">
                                快捷键
                            </a>
                            
                            
                            
                            <a href="/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95" title="性能测试">
                                性能测试
                            </a>
                            
                            
                            
                            <a href="/tags/%E6%8A%98%E5%8F%A0" title="折叠">
                                折叠
                            </a>
                            
                            
                            
                            <a href="/tags/%E6%8B%90%E7%82%B9" title="拐点">
                                拐点
                            </a>
                            
                            
                            
                            <a href="/tags/%E6%90%9C%E7%B4%A2" title="搜索">
                                搜索
                            </a>
                            
                            
                            
                            <a href="/tags/%E6%9D%8E%E5%A8%9F" title="李娟">
                                李娟
                            </a>
                            
                            
                            
                            <a href="/tags/%E6%A0%87%E8%AE%B0" title="标记">
                                标记
                            </a>
                            
                            
                            
                            <a href="/tags/%E6%B5%81%E7%A8%8B%E5%9B%BE" title="流程图">
                                流程图
                            </a>
                            
                            
                            
                            <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0" title="深度学习">
                                深度学习
                            </a>
                            
                            
                            
                            <a href="/tags/%E7%81%AF%E7%AE%B1" title="灯箱">
                                灯箱
                            </a>
                            
                            
                            
                            <a href="/tags/%E7%83%AD%E5%8A%9B%E5%9B%BE" title="热力图">
                                热力图
                            </a>
                            
                            
                            
                            <a href="/tags/%E7%88%B1%E7%9A%84%E8%89%BA%E6%9C%AF" title="爱的艺术">
                                爱的艺术
                            </a>
                            
                            
                            
                            <a href="/tags/%E7%99%BD%E7%9B%92%E6%89%AB%E6%8F%8F" title="白盒扫描">
                                白盒扫描
                            </a>
                            
                            
                            
                            <a href="/tags/%E7%9F%AD%E4%BB%A3%E7%A0%81" title="短代码">
                                短代码
                            </a>
                            
                            
                            
                            <a href="/tags/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0" title="神经网络与深度学习">
                                神经网络与深度学习
                            </a>
                            
                            
                            
                            <a href="/tags/%E8%84%9A%E6%9C%AC" title="脚本">
                                脚本
                            </a>
                            
                            
                            
                            <a href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89" title="自定义">
                                自定义
                            </a>
                            
                            
                            
                            <a href="/tags/%E8%A7%86%E9%A2%91" title="视频">
                                视频
                            </a>
                            
                            
                            
                            <a href="/tags/%E8%AE%BF%E9%97%AE%E9%87%8F" title="访问量">
                                访问量
                            </a>
                            
                            
                            
                            <a href="/tags/%E8%AF%84%E8%AE%BA" title="评论">
                                评论
                            </a>
                            
                            
                            
                            <a href="/tags/%E8%BF%9B%E5%BA%A6%E6%9D%A1" title="进度条">
                                进度条
                            </a>
                            
                            
                            
                            <a href="/tags/%E9%9A%8F%E6%9C%BA%E6%B5%8F%E8%A7%88" title="随机浏览">
                                随机浏览
                            </a>
                            
                            
                        </div>
                    </section>
                    

                    
                    
                </div>
            </div>
        </div>
    </article>




    


<style>
     
    #backtop {
        color: #c2c0c0;
        position:fixed;
        right: 30px;
        bottom: 30px;
        width: 35px;
        height: 35px;
        z-index: 9999999999998;

         
    }
    svg:hover 
    {
        color: #0086a194;
    }
</style>
<div id="backtop">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-circle-up" class="svg-inline--fa fa-chevron-circle-up fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <path fill="currentColor" d="M8 256C8 119 119 8 256 8s248 111 248 248-111 248-248 248S8 393 8 256zm231-113.9L103.5 277.6c-9.4 9.4-9.4 24.6 0 33.9l17 17c9.4 9.4 24.6 9.4 33.9 0L256 226.9l101.6 101.6c9.4 9.4 24.6 9.4 33.9 0l17-17c9.4-9.4 9.4-24.6 0-33.9L273 142.1c-9.4-9.4-24.6-9.4-34 0z">
        </path>
    </svg>
    
</div>
<script>
    var timer = null;
    backtop.onclick = function () {
        cancelAnimationFrame(timer);
        
        var startTime = +new Date();
        
        var b = document.body.scrollTop || document.documentElement.scrollTop;
        var d = 500;
        var c = b;
        timer = requestAnimationFrame(function func() {
            var t = d - Math.max(0, startTime - (+new Date()) + d);
            document.documentElement.scrollTop = document.body.scrollTop = t * (-c) / d + b;
            timer = requestAnimationFrame(func);
            if (t == d) {
                cancelAnimationFrame(timer);
            }
        });
    }

</script>
<link rel="stylesheet" href="/css/backtop.css">



<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                    
                    
                    
                    

                    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/HuuuuuuO">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>

                
                <p class="copyright text-muted">

                    
                    本博客已稳定运行 
                    <span id="runningdays" class="running-days"></span>
                <script>
                    let s1 = '2024-3-18'; 
                    s1 = new Date(s1.replace(/-/g, "/"));
                    let s2 = new Date();
                    let timeDifference = s2.getTime() - s1.getTime();

                    let days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
                    let hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    let minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));

                    let result = days + " 天 " + hours + " 小时 " + minutes + " 分钟";
                    document.getElementById('runningdays').innerHTML = result;
                </script>
  
                    <br>
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    发表了 58 篇文章 · 
                    总计 8.35 万字
                    <br>
                    
                    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
                    <span id="busuanzi_container_site_pv">本站总访问量 <span id="busuanzi_value_site_pv"></span> 次 · </span>
                    <span id="busuanzi_container_site_uv">您是本站第 <span id="busuanzi_value_site_uv"></span> 位访问者</span>
                    <br>
                    Copyright &copy; Nefelibata 2024
                    
                    <br>
                    Powered by Hugo
                    
                    
                </p>
                
            </div>
        </div>
    </div>
</footer>


<script src="https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.js" async></script>

<script>
    function loadAsync(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if ($('#tag_cloud').length !== 0) {
        loadAsync("/js/jquery.tagcloud.js", function () {
            $.fn.tagcloud.defaults = {
                
                color: { start: '#bbbbee', end: '#0085a1' },
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>






<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
        _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>







<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

<meting-js
server="netease"
type="playlist"
id="93413318"
mini=true
fixed=true
order=random
loop=all
preload=auto
mutex=true
volume=0.5
autoplay=false
lrc-type=1
list-folded=true
list-max-height=90px
>
</meting-js>








<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


<script>
    (function(){var w=window;if(w.ChannelIO){return w.console.error("ChannelIO script included twice.");}var ch=function(){ch.c(arguments);};ch.q=[];ch.c=function(args){ch.q.push(args);};w.ChannelIO=ch;function l(){if(w.ChannelIOInitialized){return;}w.ChannelIOInitialized=true;var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src="https://cdn.channel.io/plugin/ch-plugin-web.js";var x=document.getElementsByTagName("script")[0];if(x.parentNode){x.parentNode.insertBefore(s,x);}}if(document.readyState==="complete"){l();}else{w.addEventListener("DOMContentLoaded",l);w.addEventListener("load",l);}})();
  
    ChannelIO('boot', {
      "pluginKey": "679bb301-2ef2-4c75-8223-37b594d3a5ec"
    });
  </script>

<script src="/js/copy-to-clipboard.js"></script>

<script>
    (function(u, c) {
      var d = document, t = 'script', o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function(e) { c(e); }); }
      s.parentNode.insertBefore(o, s);
    })('//cdn.bootcss.com/pangu/3.3.0/pangu.min.js', function() {
      pangu.spacingPage();
    });
    </script>
    





<progress id="content_progress" value="0"></progress>
<link rel="stylesheet" href="/css/progress.css">
<script src="/js/progress.js"></script>
<script src="/js/mouse.js"></script>
<script src="/js/funnytitle.js"></script>



</html>
